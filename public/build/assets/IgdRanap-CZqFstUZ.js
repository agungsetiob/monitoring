import{g as r,i as j,D as k,r as B,c as p,o as u,d as c,a as e,b as F,u as x,k as Y,p as E,W as b,y as v,F as N,e as I,t as s}from"./app-Dsvk9uMI.js";import{_ as L}from"./DateFilter-DLh730Re.js";import"./auto-0DX8mfB2.js";import{C}from"./chart-BOVB5OMx.js";const S={class:"min-h-screen bg-gradient-to-br from-blue-100 to-green-100 px-8 py-10 flex flex-col items-center"},H={class:"w-full max-w-8xl bg-white rounded-2xl shadow-xl p-8 space-y-8"},J={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},O={class:"overflow-x-auto"},U={class:"min-w-full border border-gray-300 rounded-lg overflow-hidden"},V={class:"px-4 py-2"},K={class:"px-4 py-2"},W={class:"px-4 py-2"},$={class:"px-4 py-2"},G={class:"px-4 py-2"},T={class:"px-4 py-2"},Z={class:"flex justify-between items-center mt-6"},z={class:"flex items-center gap-4"},q=["disabled"],Q={class:"text-gray-700 font-medium"},X=["disabled"],ee={class:"text-sm text-gray-700"},te={class:"text-red-600"},ae={key:0,class:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-white bg-opacity-80"},le={__name:"IgdRanap",props:{patients:Object,summary:Object,start_date:String,end_date:String,per_page:Number},setup(A){const a=A,y=r(a.start_date),f=r(a.end_date),n=r(a.patients.current_page),m=r(a.patients.last_page),d=r(a.per_page??20),h=r(a.patients.total),D=r(a.patients.data),g=r(!1),M=r(null),P=r(null),_=l=>{l<1||l>m.value||b.get(route("laporan.igd-ranap"),{start_date:y.value,end_date:f.value,page:l,per_page:d.value},{preserveScroll:!0})},R=l=>{b.get(route("laporan.igd-ranap"),{...l,per_page:d.value})};return j(()=>{const l=document.getElementById("chart-per-hari").getContext("2d");M.value=new C(l,{type:"bar",data:{labels:a.summary.per_hari.map(o=>k(o.tanggal).format("DD/MM/YYYY")),datasets:[{label:"Jumlah Pasien",data:a.summary.per_hari.map(o=>o.total),backgroundColor:"#36A2EB",borderColor:"#36A2EB",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}}});const t=document.getElementById("chart-per-dokter").getContext("2d");P.value=new C(t,{type:"bar",data:{labels:a.summary.per_dokter.map(o=>o.dokter),datasets:[{label:"Jumlah Pasien",data:a.summary.per_dokter.map(o=>o.total),backgroundColor:"#FF6384",borderColor:"#FF6384",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,indexAxis:"y",plugins:{legend:{display:!1}},scales:{x:{beginAtZero:!0}}}})}),document.addEventListener("inertia:start",()=>{g.value=!0}),document.addEventListener("inertia:finish",()=>{g.value=!1}),(l,t)=>{const o=B("font-awesome-icon");return u(),p(N,null,[c(x(Y),{title:"Lanjut Rawat Inap"}),e("div",S,[e("div",H,[e("div",J,[t[4]||(t[4]=e("h1",{class:"text-3xl font-extrabold text-gray-800 flex items-center gap-3"}," üè• Laporan IGD ‚Üí Rawat Inap ",-1)),e("button",{onClick:t[0]||(t[0]=i=>x(b).visit("/laporan")),class:"inline-flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold px-6 py-3 rounded-xl transition duration-300 ease-in-out transform hover:scale-105"},t[3]||(t[3]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M19 12H5"}),e("path",{d:"M12 19l-7-7 7-7"})],-1),v(" Kembali ")]))]),c(L,{"initial-start-date":y.value,"initial-end-date":f.value,onFilter:R},null,8,["initial-start-date","initial-end-date"]),t[9]||(t[9]=E('<div class="bg-white p-6 rounded-xl shadow-md border border-gray-200 h-[500px]"><h2 class="text-xl font-bold text-gray-800 mb-4">üìÖ Lanjut Rawat Inap</h2><canvas id="chart-per-hari"></canvas></div><div class="bg-white p-6 rounded-xl shadow-md border border-gray-200 h-[500px]"><h2 class="text-xl font-bold text-gray-800 mb-4">üë®‚Äç‚öïÔ∏è Pasien per Dokter</h2><canvas id="chart-per-dokter"></canvas></div>',2)),e("div",O,[e("table",U,[t[5]||(t[5]=e("thead",{class:"bg-blue-600 text-white"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left"},"No"),e("th",{class:"px-4 py-2 text-left"},"NORM"),e("th",{class:"px-4 py-2 text-left"},"NO KUNJUNGAN"),e("th",{class:"px-4 py-2 text-left"},"Nama"),e("th",{class:"px-4 py-2 text-left"},"Masuk"),e("th",{class:"px-4 py-2 text-left"},"DPJP Ranap")])],-1)),e("tbody",null,[(u(!0),p(N,null,I(D.value,(i,w)=>(u(),p("tr",{key:w,class:"border-t"},[e("td",V,s((n.value-1)*d.value+w+1),1),e("td",K,s(i.NORM),1),e("td",W,s(i.KUNJUNGAN),1),e("td",$,s(i.NAMA),1),e("td",G,s(x(k)(i.MASUK).format("DD/MM/YYYY HH:mm")),1),e("td",T,s(i.DPJP_RANAP),1)]))),128))])])]),e("div",Z,[e("div",z,[e("button",{onClick:t[1]||(t[1]=i=>_(n.value-1)),disabled:n.value===1,class:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 hover:bg-gray-100 rounded-lg disabled:opacity-40 disabled:cursor-not-allowed transition"},[c(o,{icon:"chevron-left"}),t[6]||(t[6]=e("span",null,"Sebelumnya",-1))],8,q),e("span",Q,"Halaman "+s(n.value)+" dari "+s(m.value),1),e("button",{onClick:t[2]||(t[2]=i=>_(n.value+1)),disabled:n.value===m.value,class:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 hover:bg-gray-100 rounded-lg disabled:opacity-40 disabled:cursor-not-allowed transition"},[t[7]||(t[7]=e("span",null,"Berikutnya",-1)),c(o,{icon:"chevron-right"})],8,X)]),e("div",ee,[v(" Menampilkan pasien "+s((n.value-1)*d.value+1)+" ‚Äì "+s(Math.min(n.value*d.value,h.value))+" dari total ",1),e("strong",te,s(h.value),1),t[8]||(t[8]=v(" pasien "))])])])]),g.value?(u(),p("div",ae,t[10]||(t[10]=[e("video",{src:"/img/loading.webm",autoplay:"",loop:"",muted:"",playsinline:""},null,-1)]))):F("",!0)],64)}}};export{le as default};
