import{D as x,g as l,i as E,r as H,c as i,o as d,d as g,a as t,b as R,u as v,k as B,W as S,y as f,t as s,F as _,e as C,n as P}from"./app-Wz4DA7Q_.js";import{d as A}from"./duration-CsBMuNTc.js";import{C as F,r as I}from"./chart-BOVB5OMx.js";import{_ as K}from"./DateFilter-POY6hhEz.js";import T from"./LosChart-C7nPISDV.js";const U={class:"min-h-screen bg-gradient-to-br from-blue-100 to-green-100 px-8 py-10 flex flex-col items-center"},V={class:"w-full max-w-8xl bg-white rounded-2xl shadow-xl p-8 space-y-8"},G={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},z={class:"bg-blue-50 p-6 rounded-xl shadow-inner"},W={class:"text-lg text-gray-800"},q={class:"list-disc pl-5 mt-2 text-gray-700"},J={class:"overflow-x-auto"},Q={class:"min-w-full border border-gray-300 rounded-lg overflow-hidden"},X={class:"px-4 py-2"},Z={class:"px-4 py-2"},tt={class:"px-4 py-2"},et={class:"px-4 py-2"},at={class:"px-4 py-2"},st={class:"px-4 py-2 font-semibold"},ot={class:"flex justify-between items-center mt-6"},nt={class:"flex items-center gap-4"},lt=["disabled"],rt={class:"text-gray-700 font-medium"},it=["disabled"],dt={class:"text-sm text-gray-700"},ut={class:"text-red-600"},ct={key:0,class:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-white bg-opacity-80"},ft={__name:"Los",props:{start_date:String,end_date:String},setup(N){x.extend(A),F.register(...I);const r=N,$=l(r.start_date),D=l(r.end_date),h=l(0),b=l({}),w=l([]),o=l(1),m=l(1),u=l(20),y=l(0),c=l(!1),L=async()=>{c.value=!0;try{const e=await(await fetch(`/laporan-los/data?start_date=${$.value}&end_date=${D.value}&page=${o.value}&per_page=${u.value}`)).json();e.success&&(w.value=e.patients,h.value=e.average_los,b.value=e.categories,o.value=e.pagination.page,u.value=e.pagination.per_page,m.value=e.pagination.last_page,y.value=e.pagination.total)}catch(a){console.error("Gagal load data:",a)}finally{c.value=!1}},k=a=>{a<1||a>m.value||(o.value=a,L())};E(L);const j=a=>{const e=x.duration(a,"minutes");return`${e.hours()} jam ${e.minutes()} menit`},O=a=>{S.get(route("laporan.los"),a)};document.addEventListener("inertia:start",()=>{c.value=!0}),document.addEventListener("inertia:finish",()=>{c.value=!1});function Y(a){return a<60?"bg-blue-100 text-blue-600":a<180?"bg-emerald-100 text-emerald-600":a<420?"bg-yellow-100 text-yellow-600":a<480?"bg-red-100 text-red-600":"bg-gray-200 text-gray-700"}return(a,e)=>{const M=H("font-awesome-icon");return d(),i(_,null,[g(v(B),{title:"Laporan LOS IGD"}),t("div",U,[t("div",V,[t("div",G,[e[4]||(e[4]=t("h1",{class:"text-3xl font-extrabold text-gray-800 flex items-center gap-3"}," 🏥 Laporan LOS IGD ",-1)),t("button",{onClick:e[0]||(e[0]=n=>v(S).visit("/laporan")),class:"inline-flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold px-6 py-3 rounded-xl transition duration-300 ease-in-out transform hover:scale-105"},e[3]||(e[3]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M19 12H5"}),t("path",{d:"M12 19l-7-7 7-7"})],-1),f(" Kembali ")]))]),g(K,{"initial-start-date":r.start_date,"initial-end-date":r.end_date,onFilter:O},null,8,["initial-start-date","initial-end-date"]),g(T,{categories:b.value,"start-date":r.start_date,"end-date":r.end_date},null,8,["categories","start-date","end-date"]),t("div",z,[e[6]||(e[6]=t("h2",{class:"text-xl font-bold text-blue-700 mb-4"},"📊 Rangkuman",-1)),t("p",W,[e[5]||(e[5]=t("strong",null,"Rata-rata LOS:",-1)),f(" "+s(h.value)+" jam",1)]),t("ul",q,[(d(!0),i(_,null,C(b.value,(n,p)=>(d(),i("li",{key:p},s(p)+": "+s(n)+" pasien",1))),128))])]),t("div",J,[t("table",Q,[e[7]||(e[7]=t("thead",{class:"bg-blue-600 text-white"},[t("tr",null,[t("th",{class:"px-4 py-2 text-left"},"No"),t("th",{class:"px-4 py-2 text-left"},"NORM"),t("th",{class:"px-4 py-2 text-left"},"Nama"),t("th",{class:"px-4 py-2 text-left"},"Masuk"),t("th",{class:"px-4 py-2 text-left"},"Keluar"),t("th",{class:"px-4 py-2 text-left"},"LOS")])],-1)),t("tbody",null,[(d(!0),i(_,null,C(w.value,(n,p)=>(d(),i("tr",{key:p,class:P(["border-t",Y(n.LOS_MINUTES)])},[t("td",X,s((o.value-1)*u.value+p+1),1),t("td",Z,s(n.NORM),1),t("td",tt,s(n.NAMA),1),t("td",et,s(v(x)(n.MASUK).format("DD/MM/YYYY HH:mm")),1),t("td",at,s(v(x)(n.KELUAR).format("DD/MM/YYYY HH:mm")),1),t("td",st,s(j(n.LOS_MINUTES)),1)],2))),128))])])]),t("div",ot,[t("div",nt,[t("button",{onClick:e[1]||(e[1]=n=>k(o.value-1)),disabled:o.value===1,class:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 hover:bg-gray-100 rounded-lg disabled:opacity-40 disabled:cursor-not-allowed transition"},[g(M,{icon:"chevron-left"}),e[8]||(e[8]=t("span",null,"Sebelumnya",-1))],8,lt),t("span",rt,"Halaman "+s(o.value)+" dari "+s(m.value),1),t("button",{onClick:e[2]||(e[2]=n=>k(o.value+1)),disabled:o.value===m.value,class:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 hover:bg-gray-100 rounded-lg disabled:opacity-40 disabled:cursor-not-allowed transition"},[e[9]||(e[9]=t("span",null,"Berikutnya",-1)),g(M,{icon:"chevron-right"})],8,it)]),t("div",dt,[f(" Menampilkan pasien "+s((o.value-1)*u.value+1)+" - "+s(Math.min(o.value*u.value,y.value))+" dari total ",1),t("strong",ut,s(y.value),1),e[10]||(e[10]=f(" pasien "))])])])]),c.value?(d(),i("div",ct,e[11]||(e[11]=[t("video",{src:"/img/loading.webm",autoplay:"",loop:"",muted:"",playsinline:""},null,-1)]))):R("",!0)],64)}}};export{ft as default};
