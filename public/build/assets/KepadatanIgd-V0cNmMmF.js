import{g as p,i as j,c as g,o as x,d as f,a as t,b as S,u as b,k as J,W as h,y as C,t as m,p as R,F as M}from"./app-CBkOarbB.js";import"./auto-COZvCdZZ.js";import{C as _,_ as P}from"./chart-Cv1CAZWi.js";const A={class:"min-h-screen bg-gradient-to-br from-green-100 to-blue-100 px-8 py-10 flex flex-col items-center"},I={class:"w-full max-w-8xl bg-white rounded-2xl shadow-xl p-8 space-y-8"},K={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},L={class:"grid grid-cols-1 sm:grid-cols-3 gap-4 mt-6"},N={class:"bg-green-100 p-4 rounded-xl text-center"},V={class:"text-2xl font-bold text-green-800"},$={class:"bg-orange-100 p-4 rounded-xl text-center"},F={class:"text-2xl font-bold text-orange-800"},T={class:"bg-red-100 p-4 rounded-xl text-center"},B={class:"text-2xl font-bold text-red-800"},D={class:"bg-white p-6 md:p-8 rounded-xl shadow-md border border-gray-200"},E={class:"relative h-[400px]"},G={class:"bg-white p-6 md:p-8 rounded-xl shadow-md border border-gray-200"},W={class:"relative h-[300px]"},z={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-white bg-opacity-80"},O={__name:"KepadatanIgd",props:{start_date:String,end_date:String,data_per_jam:Array,data_per_shift:Array},setup(v){const s=v,c=p(null),u=p(null);let i=null,o=null;const y=l=>{h.get(route("laporan.kepadatan-igd"),l)};j(()=>{i&&i.destroy();const l=c.value.getContext("2d"),e=s.data_per_jam.map(a=>String(a.jam).padStart(2,"0")+":00"),n=s.data_per_jam.map(a=>a.jumlah);i=new _(l,{type:"bar",data:{labels:e,datasets:[{label:"Jumlah Pasien Masuk",data:n,backgroundColor:n.map(a=>a>11?"#dc2626":a>5?"#f97316":"#16a34a"),borderRadius:6}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:a=>`${a.parsed.y} pasien`}}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Jumlah Pasien"}},x:{title:{display:!0,text:"Jam Masuk"}}}}}),o&&o.destroy();const r=u.value.getContext("2d"),w=s.data_per_shift.map(a=>a.shift),k=s.data_per_shift.map(a=>a.jumlah);o=new _(r,{type:"pie",data:{labels:w,datasets:[{data:k,backgroundColor:["#3b82f6","#f59e0b","#10b981"]}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{tooltip:{callbacks:{label:a=>`${a.label}: ${a.parsed} pasien`}}}}})});const d=p(!1);return document.addEventListener("inertia:start",()=>{d.value=!0}),document.addEventListener("inertia:finish",()=>{d.value=!1}),(l,e)=>(x(),g(M,null,[f(b(J),{title:"Laporan Kepadatan IGD"}),t("div",A,[t("div",I,[t("div",K,[e[2]||(e[2]=t("h1",{class:"text-3xl font-extrabold text-gray-800 flex items-center gap-3"}," ðŸ“Š Laporan Kepadatan IGD ",-1)),t("button",{onClick:e[0]||(e[0]=n=>b(h).visit("/laporan")),class:"inline-flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold px-6 py-3 rounded-xl transition duration-300 ease-in-out transform hover:scale-105"},e[1]||(e[1]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M19 12H5"}),t("path",{d:"M12 19l-7-7 7-7"})],-1),C(" Kembali ")]))]),f(P,{"initial-start-date":s.start_date,"initial-end-date":s.end_date,onFilter:y},null,8,["initial-start-date","initial-end-date"]),t("div",L,[t("div",N,[e[3]||(e[3]=t("p",{class:"text-sm text-gray-600"},"Total Pasien",-1)),t("p",V,m(s.data_per_jam.reduce((n,r)=>n+r.jumlah,0)),1)]),t("div",$,[e[4]||(e[4]=t("p",{class:"text-sm text-gray-600"},"Jam Tersibuk",-1)),t("p",F,m((s.data_per_jam.length?s.data_per_jam.reduce((n,r)=>r.jumlah>n.jumlah?r:n,s.data_per_jam[0]).jam:"--").toString().padStart(2,"0"))+":00 ",1)]),t("div",T,[e[5]||(e[5]=t("p",{class:"text-sm text-gray-600"},"Pasien Tersibuk per Jam",-1)),t("p",B,m(Math.max(...s.data_per_jam.map(n=>n.jumlah))),1)])]),t("div",D,[e[6]||(e[6]=t("h2",{class:"text-xl font-bold mb-4 text-gray-700"},"ðŸ“ˆ Grafik Pasien per Jam",-1)),t("div",E,[t("canvas",{ref_key:"chartRefJam",ref:c},null,512)]),e[7]||(e[7]=R('<div class="mt-4 flex flex-wrap gap-4 text-sm text-gray-600"><div class="flex items-center gap-2"><span class="w-4 h-4 rounded bg-red-600"></span> â‰¥ 12 pasien (padat) </div><div class="flex items-center gap-2"><span class="w-4 h-4 rounded bg-orange-500"></span> 6-11 pasien (sedang) </div><div class="flex items-center gap-2"><span class="w-4 h-4 rounded bg-green-600"></span> â‰¤ 5 pasien (longgar) </div></div>',1))]),t("div",G,[e[8]||(e[8]=t("h2",{class:"text-xl font-bold mb-4 text-gray-700"},"ðŸ•’ Kepadatan Pasien per Shift",-1)),t("div",W,[t("canvas",{ref_key:"chartRefShift",ref:u},null,512)])])])]),d.value?(x(),g("div",z,e[9]||(e[9]=[t("video",{src:"/img/loading.webm",autoplay:"",loop:"",muted:"",playsinline:""},null,-1)]))):S("",!0)],64))}};export{O as default};
