import{r as N,c as l,o as s,a as t,b as u,t as m,d as x,n as f,F as h,e as D,f as C,g as b,h as $,w as B,W as R,i as U,j as E,u as G,k as M,l as F,v as P}from"./app-B8GnCsiC.js";const K={class:"flex justify-between items-start"},V={class:"flex items-center gap-2"},z={class:"font-bold text-gray-800"},J={class:"text-sm text-gray-600"},W={class:"text-gray-800"},q={class:"flex gap-2"},H={key:0,class:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800"},Q={key:1,class:"px-2 py-1 text-xs rounded-full bg-red-300 text-black-800"},X={key:0,class:"text-sm text-gray-600 mt-1"},Y={class:"flex justify-between items-center mt-2"},Z={class:"text-xs text-gray-500"},ee={class:"text-xs font-medium text-gray-700"},O={__name:"AntreanCard",props:{item:{type:Object,required:!0},statusType:String},setup(e){return(c,i)=>{const o=N("font-awesome-icon");return s(),l("div",{class:f(["p-4 rounded-lg border transition-all hover:shadow-md",{"border-gray-300":e.statusType==="waiting","border-yellow-300":e.statusType==="process","border-green-300":e.statusType==="complete","border-2 border-red-400 bg-red-100":e.item.CITO===1}])},[t("div",K,[t("div",null,[t("div",V,[t("span",z,m(e.item.NORM),1),t("span",J,[x(o,{icon:e.item.JENIS_KELAMIN===1?"mars":"venus",class:f(e.item.JENIS_KELAMIN===1?"text-blue-500":"text-pink-500")},null,8,["icon","class"])])]),t("span",W,m(e.item.NAMA),1)]),t("div",q,[e.item.RACIKAN===1?(s(),l("span",H," Racikan ")):u("",!0),e.item.CITO===1?(s(),l("span",Q," Cito ")):u("",!0)])]),e.item.ASAL_RUANGAN?(s(),l("div",X,m(e.item.ASAL_RUANGAN),1)):u("",!0),t("div",Y,[t("span",Z,m(e.item.TANGGAL),1),t("span",ee,m(e.item.NOPEN),1)])],2)}}},te=(e,c)=>{const i=e.__vccOpts||e;for(const[o,y]of c)i[o]=y;return i},se={class:"rounded-xl shadow-lg overflow-hidden h-full border border-gray-200 relative"},ae={key:0,class:"absolute inset-0 bg-white bg-opacity-70 flex items-center justify-center z-10"},le={key:2,class:"text-center text-red-500 py-8"},oe={__name:"StatusColumn",props:{title:String,items:{type:Array,default:()=>[]},statusType:{type:String,validator:e=>["waiting","process","complete"].includes(e)},loading:{type:Boolean,default:!1}},setup(e){const c={waiting:"bg-gray-500",process:"bg-yellow-400",complete:"bg-green-500"},i={waiting:"text-white",process:"text-gray-800",complete:"text-white"},o={waiting:"scroll-waiting",process:"scroll-process",complete:"scroll-complete"};return(y,p)=>{const n=N("font-awesome-icon");return s(),l("div",se,[t("div",{class:f(["p-4 text-center text-xl font-bold",[c[e.statusType],i[e.statusType]]])},m(e.title),3),t("div",{class:f(["bg-white p-4 space-y-3 h-[50vh] overflow-y-auto relative custom-scrollbar",o[e.statusType]])},[e.loading?(s(),l("div",ae,[t("div",{class:f(["animate-spin rounded-full h-12 w-12 border-t-4 border-b-4",{"border-gray-500":e.statusType==="waiting","border-yellow-400":e.statusType==="process","border-green-500":e.statusType==="complete"}])},null,2)])):u("",!0),!e.loading&&e.items&&e.items.length>0?(s(!0),l(h,{key:1},D(e.items,g=>(s(),C(O,{key:g.TANGGAL,item:g,"status-type":e.statusType},null,8,["item","status-type"]))),128)):u("",!0),!e.loading&&(!e.items||e.items.length===0)?(s(),l("div",le,[x(n,{icon:"pills",class:"text-4xl"}),p[0]||(p[0]=t("p",{class:"mt-2"},"Tidak ada resep",-1))])):u("",!0)],2)])}}},A=te(oe,[["__scopeId","data-v-cb321d61"]]),ne={class:"min-h-screen bg-pattern p-4 md:p-4"},ie={class:"text-center mb-6"},re={class:"bg-gradient-to-r from-teal-500 to-blue-500 rounded-xl shadow-2xl p-4 inline-block"},de={class:"flex flex-col md:flex-row items-center justify-center gap-4"},ce={class:"relative w-full md:w-64"},ue=["disabled"],me=["value"],pe={class:"text-lg md:text-xl font-semibold text-gray-700 bg-white px-4 py-2 rounded-xl shadow-sm"},ge={key:0,class:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-lg mb-6"},ve={class:"flex items-center"},xe={class:"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6 mb-6 transition-all duration-300"},be={class:"bg-white rounded-xl shadow-lg p-4 md:p-6 border border-teal-100 transition-all duration-300"},ye={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},fe={key:1,class:"text-center text-red-500 py-2 col-span-4"},he={key:2,class:"text-center text-red-500 py-4 col-span-4"},_e={__name:"Index",props:{initialData:Object,depoOptions:Array,selectedDepo:String},setup(e){const c=e,i=b(c.selectedDepo||(c.depoOptions.length>0?c.depoOptions[0]:"")),o=b({belum_diterima:[],dilayani:[],selesai:[],final:[]}),y=b(!1),p=b(null),n=b(!1),g=b(null);let w=null;const I={rajal:"Depo Rawat Jalan",ranap:"Depo Rawat Inap",ok:"Depo OK",igd:"Depo IGD"},j=$(()=>c.depoOptions.map(r=>({value:r,label:I[r]||r.toUpperCase()}))),L=$(()=>g.value?new Date(g.value).toLocaleString("id-ID",{dateStyle:"long",timeStyle:"medium"}):"Belum ada update"),_=async(r,a=!0)=>{try{a&&(y.value=!0),p.value=null;const v=await fetch(`/api/antrean-farmasi/data?depo=${r}`,{headers:{Accept:"application/json"}}),d=await v.json();if(!v.ok||!d.success)throw new Error(d.message||"Gagal memuat data");o.value=d.data,g.value=new Date}catch(v){console.error("Fetch error:",v),p.value=v.message}finally{a&&(y.value=!1)}},k=()=>{w=setInterval(()=>{n.value||_(i.value,!1)},19e3)},S=()=>{clearInterval(w),w=null};let T;return B(i,r=>{n.value=!0,_(r,!0).finally(()=>{n.value=!1}),clearTimeout(T),T=setTimeout(()=>{R.get("/resep",{depo:r},{preserveState:!0,preserveScroll:!0,replace:!0}),S(),k()},300)}),U(()=>{var r;(r=c.initialData)!=null&&r.data?(o.value=c.initialData.data,g.value=new Date,k()):i.value&&_(i.value,!0).then(()=>{k()})}),E(()=>{S()}),(r,a)=>{const v=N("font-awesome-icon");return s(),l(h,null,[x(G(M),{title:"Antrean Farmasi"}),t("div",ne,[t("div",ie,[t("div",re,[a[1]||(a[1]=t("h1",{class:"text-2xl md:text-4xl font-extrabold mb-4 text-white"}," Antrean Farmasi RSUD dr. H. Andi Abdurrahman Noor ",-1)),t("div",de,[t("div",ce,[F(t("select",{"onUpdate:modelValue":a[0]||(a[0]=d=>i.value=d),disabled:n.value,class:"w-full px-4 py-2 border-2 border-teal-200 rounded-xl bg-white shadow-sm focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all appearance-none"},[(s(!0),l(h,null,D(j.value,d=>(s(),l("option",{key:d.value,value:d.value},m(d.label),9,me))),128))],8,ue),[[P,i.value]])]),t("div",pe," Last Update: "+m(L.value),1)])])]),p.value?(s(),l("div",ge,[t("div",ve,[a[2]||(a[2]=t("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("span",null,m(p.value),1)])])):u("",!0),t("div",xe,[x(A,{title:"Belum Diterima",items:o.value.belum_diterima,"status-type":"waiting",loading:n.value},null,8,["items","loading"]),x(A,{title:"Sedang Dilayani",items:o.value.dilayani,"status-type":"process",loading:n.value},null,8,["items","loading"]),x(A,{title:"Resep Selesai",items:o.value.selesai,"status-type":"complete",loading:n.value},null,8,["items","loading"])]),t("div",be,[a[5]||(a[5]=t("h2",{class:"text-xl font-bold text-center mb-4 text-gray-700 flex items-center justify-center"},[t("span",{class:"bg-purple-100 text-purple-800 px-4 py-2 rounded-full"},"Obat Diterima Pasien")],-1)),t("div",ye,[n.value?u("",!0):(s(!0),l(h,{key:0},D(o.value.final,d=>(s(),C(O,{key:d.NOPEN,item:d,"status-type":"complete",loading:n.value,class:"border-2 border-purple-300 hover:border-purple-500 transition-colors duration-200"},null,8,["item","loading"]))),128)),o.value.final.length===0&&!n.value?(s(),l("div",fe,[x(v,{icon:"face-sad-cry",class:"text-5xl"}),a[3]||(a[3]=t("p",{class:"mt-2"},"Belum ada obat diterima pasien",-1))])):u("",!0),n.value?(s(),l("div",he,a[4]||(a[4]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-purple-500 mx-auto mb-2"},null,-1)]))):u("",!0)])])])],64)}}};export{_e as default};
