import{D as T,g as b,i as N,w as V,c as s,o as n,d as D,a as e,b as F,u as j,k as I,p as R,W as A,y as $,F as m,e as L,t as i}from"./app-G0XMPDCN.js";import"./auto-B7skPUCU.js";import{d as K}from"./duration-B37jmHtM.js";import{_ as M,C as O}from"./chart-Dlpe4nVB.js";const H={class:"min-h-screen bg-gradient-to-br from-blue-100 to-green-100 flex flex-col items-center justify-center px-8 py-10"},W={class:"w-full bg-white rounded-2xl shadow-xl p-8 space-y-8 max-w-full xl:max-w-8xl"},z={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},G={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},J={class:"bg-white p-6 md:p-8 rounded-xl shadow-md border border-gray-200"},q={class:"w-full table-auto border-collapse border border-gray-300 rounded-lg overflow-hidden"},Q={class:"px-4 py-3 text-gray-700"},U={class:"px-4 py-3 text-gray-700"},X={class:"bg-white p-6 md:p-8 rounded-xl shadow-md border border-gray-200"},Y={class:"w-full table-auto border-collapse border border-gray-300 rounded-lg overflow-hidden"},Z={class:"px-4 py-3 text-gray-700"},tt={class:"px-4 py-3 text-gray-700"},et={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-white bg-opacity-80"},st={__name:"Triage",props:{report:Object,daily_trend:Array,percentages:Object,avg_los:Array,start_date:String,end_date:String},setup(B){var y,v,h,w,P,_;T.extend(K);const a=B,c=b(!1);document.addEventListener("inertia:start",()=>{c.value=!0}),document.addEventListener("inertia:finish",()=>{c.value=!1});const d=b([{label:"P1",count:((y=a.report)==null?void 0:y.P1)??0,color:"#f87171"},{label:"P2",count:((v=a.report)==null?void 0:v.P2)??0,color:"#f87171"},{label:"P3",count:((h=a.report)==null?void 0:h.P3)??0,color:"#facc15"},{label:"P4",count:((w=a.report)==null?void 0:w.P4)??0,color:"#4ade80"},{label:"P5",count:((P=a.report)==null?void 0:P.P5)??0,color:"#4ade80"},{label:"DOA",count:((_=a.report)==null?void 0:_.DOA)??0,color:"#9ca3af"}]),p=b(a.daily_trend);let u=null,g=null;const S=r=>{A.get(route("laporan.triage"),r)},x=()=>{const r=document.getElementById("triageChart");r&&(u&&u.destroy(),u=new O(r,{type:"bar",data:{labels:d.value.map(t=>t.label),datasets:[{label:"Jumlah Pasien",data:d.value.map(t=>t.count),backgroundColor:d.value.map(t=>t.color)}]},options:{responsive:!0,maintainAspectRatio:!1}}))},f=()=>{const r=document.getElementById("dailyTrendChart");r&&(g&&g.destroy(),g=new O(r,{type:"line",data:{labels:p.value.map(t=>t.tanggal),datasets:["P1","P2","P3","P4","P5","DOA"].map((t,o)=>({label:t,data:p.value.map(l=>l[t]),borderColor:d.value[o].color,fill:!1,tension:.1}))},options:{responsive:!0,maintainAspectRatio:!1}}))};N(()=>{x(),f()}),V([()=>a.report,()=>a.daily_trend],()=>{var r,t,o,l,C,k;d.value=[{label:"P1",count:((r=a.report)==null?void 0:r.P1)??0,color:"#f87171"},{label:"P2",count:((t=a.report)==null?void 0:t.P2)??0,color:"#f87171"},{label:"P3",count:((o=a.report)==null?void 0:o.P3)??0,color:"#facc15"},{label:"P4",count:((l=a.report)==null?void 0:l.P4)??0,color:"#4ade80"},{label:"P5",count:((C=a.report)==null?void 0:C.P5)??0,color:"#4ade80"},{label:"DOA",count:((k=a.report)==null?void 0:k.DOA)??0,color:"#9ca3af"}],p.value=a.daily_trend,x(),f()},{deep:!0});const E=r=>{const t=T.duration(r,"minutes"),o=t.hours(),l=t.minutes();return`${o} jam ${l} menit`};return(r,t)=>(n(),s(m,null,[D(j(I),{title:"Laporan Triage"}),e("div",H,[e("div",W,[e("div",z,[t[2]||(t[2]=e("h1",{class:"text-3xl font-extrabold text-gray-800 flex items-center gap-3"}," 📊 Laporan Triage Pasien ",-1)),e("button",{onClick:t[0]||(t[0]=o=>j(A).visit("/laporan")),class:"inline-flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold px-6 py-3 rounded-xl transition duration-300 ease-in-out transform hover:scale-105"},t[1]||(t[1]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M19 12H5"}),e("path",{d:"M12 19l-7-7 7-7"})],-1),$(" Kembali ")]))]),D(M,{"initial-start-date":a.start_date,"initial-end-date":a.end_date,onFilter:S},null,8,["initial-start-date","initial-end-date"]),t[7]||(t[7]=R('<div class="bg-white p-6 md:p-8 rounded-xl shadow-md border border-gray-200"><h2 class="text-xl font-bold mb-4 text-gray-700">📊 Grafik Triage</h2><div class="relative h-[400px]"><canvas id="triageChart"></canvas></div></div><div class="bg-white p-6 md:p-8 rounded-xl shadow-md border border-gray-200"><h2 class="text-xl font-bold mb-4 text-gray-700">📈 Tren Harian</h2><div class="relative h-[400px]"><canvas id="dailyTrendChart"></canvas></div></div>',2)),e("div",G,[e("div",J,[t[4]||(t[4]=e("h2",{class:"text-xl font-bold mb-4 text-gray-700"},"📊 Persentase Triage",-1)),e("table",q,[t[3]||(t[3]=e("thead",{class:"bg-gray-100"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left font-semibold text-gray-800"},"Kategori"),e("th",{class:"px-4 py-3 text-left font-semibold text-gray-800"},"Persentase (%)")])],-1)),e("tbody",null,[(n(!0),s(m,null,L(a.percentages,(o,l)=>(n(),s("tr",{key:l,class:"border-b border-gray-200 last:border-b-0"},[e("td",Q,i(l),1),e("td",U,i(o)+"%",1)]))),128))])])]),e("div",X,[t[6]||(t[6]=e("h2",{class:"text-xl font-bold mb-4 text-gray-700"},"🏥 Rata-rata LOS",-1)),e("table",Y,[t[5]||(t[5]=e("thead",{class:"bg-gray-100"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left font-semibold text-gray-800"},"Kategori"),e("th",{class:"px-4 py-3 text-left font-semibold text-gray-800"},"LOS Rata-rata")])],-1)),e("tbody",null,[(n(!0),s(m,null,L(a.avg_los,o=>(n(),s("tr",{key:o.kategori,class:"border-b border-gray-200 last:border-b-0"},[e("td",Z,i(o.kategori),1),e("td",tt,i(E(o.avg_los_minutes)),1)]))),128))])])])])])]),c.value?(n(),s("div",et,t[8]||(t[8]=[e("video",{src:"/img/loading.webm",autoplay:"",loop:"",muted:"",playsinline:""},null,-1)]))):F("",!0)],64))}};export{st as default};
