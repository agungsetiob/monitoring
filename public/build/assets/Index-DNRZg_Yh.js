import{g as m,w as q,i as z,j as he,h as de,c as p,o as i,a as e,d as J,m as K,l as M,p as le,T as G,n as W,q as we,b as P,f as ue,t as n,s as ke,x as I,y as $,u as re,k as Te,W as _e,z as h,A as Se,B,v as ne,F as Y,e as ie,C as je,D as Ae,E as Me}from"./app-2jVEC8Rh.js";import{_ as Ce}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Re={class:"fixed inset-0 z-50 overflow-y-auto px-4 py-6 sm:px-0 flex items-center justify-center","scroll-region":""},Ne={__name:"Modal",props:{show:{type:Boolean,default:!1},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0}},emits:["close"],setup(T,{emit:_}){const u=T,x=_,w=m(),l=m(u.show);q(()=>u.show,()=>{var r;u.show?(document.body.style.overflow="hidden",l.value=!0,(r=w.value)==null||r.showModal()):(document.body.style.overflow="",setTimeout(()=>{var j;(j=w.value)==null||j.close(),l.value=!1},200))});const C=()=>{u.closeable&&x("close")},g=r=>{r.key==="Escape"&&(r.preventDefault(),u.show&&C())};z(()=>document.addEventListener("keydown",g)),he(()=>{document.removeEventListener("keydown",g),document.body.style.overflow=""});const k=de(()=>({sm:"sm:max-w-sm",md:"sm:max-w-md",lg:"sm:max-w-lg",xl:"sm:max-w-xl","2xl":"sm:max-w-2xl","4xl":"sm:max-w-4xl","5xl":"sm:max-w-5xl","6xl":"sm:max-w-6xl",fullscreen:"sm:max-w-full"})[u.maxWidth]);return(r,j)=>(i(),p("dialog",{class:"z-50 m-0 min-h-full min-w-full overflow-y-auto bg-transparent backdrop:bg-transparent",ref_key:"dialog",ref:w},[e("div",Re,[J(G,{"enter-active-class":"ease-out duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"ease-in duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:K(()=>[M(e("div",{class:"fixed inset-0 transform transition-all",onClick:C},j[0]||(j[0]=[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"},null,-1)]),512),[[le,T.show]])]),_:1}),J(G,{"enter-active-class":"ease-out duration-300","enter-from-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to-class":"opacity-100 translate-y-0 sm:scale-100","leave-active-class":"ease-in duration-200","leave-from-class":"opacity-100 translate-y-0 sm:scale-100","leave-to-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:K(()=>[M(e("div",{class:W(["mb-6 transform overflow-hidden rounded-lg bg-white shadow-xl transition-all sm:mx-auto sm:w-full",k.value])},[l.value?we(r.$slots,"default",{key:0}):P("",!0)],2),[[le,T.show]])]),_:3})])],512))}},Pe={key:0,class:"fixed inset-x-0 top-4 flex justify-center z-50 px-4"},Le={class:"flex items-start"},Ee={class:"font-medium text-sm sm:text-base"},Oe={__name:"SuccessFlash",props:{flash:Object},emits:["clearFlash"],setup(T,{emit:_}){const u=T,x=_,w=m(null),l=m(null),C=()=>{clearTimeout(w.value),x("clearFlash")};return z(()=>{q(()=>u.flash.success,g=>{g&&(clearTimeout(w.value),w.value=setTimeout(()=>{x("clearFlash")},5e3))},{immediate:!0})}),(g,k)=>(i(),ue(G,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"opacity-0 translate-y-4","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-200","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-4"},{default:K(()=>[T.flash.success?(i(),p("div",Pe,[e("div",{class:"flex items-center justify-between w-full max-w-md bg-green-50 border-l-4 border-green-500 text-green-800 px-4 py-3 rounded-lg shadow-lg",role:"alert",style:{"backdrop-filter":"blur(10px)"},ref_key:"successAlert",ref:l},[e("div",Le,[k[0]||(k[0]=e("svg",{class:"w-5 h-5 mr-3 mt-0.5 text-green-600 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",null,[e("p",Ee,n(T.flash.success),1)])]),e("button",{onClick:C,class:"ml-4 p-1 rounded-full hover:bg-green-100 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 focus:ring-offset-green-50","aria-label":"Close notification"},k[1]||(k[1]=[e("svg",{class:"w-5 h-5 text-green-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))],512)])):P("",!0)]),_:1}))}},De={key:0,class:"fixed inset-x-0 top-4 flex justify-center z-50 px-4"},Be={class:"flex items-start"},Je={class:"font-medium text-sm sm:text-base"},$e={__name:"ErrorFlash",props:{flash:Object},emits:["clearFlash"],setup(T,{emit:_}){const u=T,x=_,w=m(null),l=m(null),C=()=>{clearTimeout(w.value),x("clearFlash")};return z(()=>{q(()=>u.flash.error,g=>{g&&(clearTimeout(w.value),w.value=setTimeout(()=>{x("clearFlash")},5e3))},{immediate:!0})}),(g,k)=>(i(),ue(G,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"opacity-0 translate-y-4","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-200","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-4"},{default:K(()=>[T.flash.error?(i(),p("div",De,[e("div",{class:"flex items-center justify-between w-full max-w-md bg-red-50 border-l-4 border-red-500 text-red-800 px-4 py-3 rounded-lg shadow-lg",role:"alert",style:{"backdrop-filter":"blur(10px)"},ref_key:"errorAlert",ref:l},[e("div",Be,[k[0]||(k[0]=e("svg",{class:"w-5 h-5 mr-3 mt-0.5 text-red-600 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",null,[e("p",Je,n(T.flash.error),1)])]),e("button",{onClick:C,class:"ml-4 p-1 rounded-full hover:bg-red-100 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 focus:ring-offset-red-50","aria-label":"Close notification"},k[1]||(k[1]=[e("svg",{class:"w-5 h-5 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))],512)])):P("",!0)]),_:1}))}},Ke={class:"p-4 min-h-screen bg-pattern md:p-6"},Fe={class:"mx-auto max-w-8xl"},Ue={class:"flex flex-col px-6 py-4 mb-6 text-white bg-gradient-to-r from-teal-500 to-blue-500 rounded-xl shadow-2xl md:flex-row md:items-center md:justify-between"},Ve={class:"p-6 mb-6 bg-white rounded-xl shadow-lg"},Ye={class:"grid grid-cols-1 gap-4 md:grid-cols-4"},Ge={class:"flex gap-3 flex-wrap"},ze=["disabled"],He={key:0,class:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},Ie=["disabled"],We={key:0,class:"p-4 mb-6 bg-white rounded-xl shadow-lg"},qe={class:"flex gap-3"},Qe=["disabled"],Xe=["disabled"],Ze={class:"p-6 mb-6 bg-white rounded-xl shadow-lg"},et={class:"mb-4 text-lg font-bold text-gray-800"},tt={class:"overflow-x-auto"},st={class:"min-w-full bg-white rounded-lg border border-gray-200"},at={class:"px-4 py-3 text-sm text-gray-900 border-b"},ot={class:"px-4 py-3 text-sm text-gray-900 border-b font-medium"},lt={class:"px-4 py-3 text-sm text-gray-900 border-b"},rt={class:"px-4 py-3 text-sm text-gray-900 border-b font-medium text-blue-600"},nt={class:"px-4 py-3 text-sm text-gray-900 border-b"},it={class:"px-4 py-3 text-sm text-gray-900 border-b font-medium"},dt={class:"px-4 py-3 text-sm text-gray-900 border-b"},ut={class:"px-4 py-3 text-sm text-gray-900 border-b"},ct={class:"px-4 py-3 text-sm text-gray-900 border-b"},pt={class:"px-4 py-3 text-sm text-gray-900 border-b text-right font-medium"},mt={class:"px-4 py-3 text-sm text-gray-900 border-b text-right"},gt={class:"px-4 py-3 text-sm text-gray-900 border-b"},bt={class:"px-4 py-3 text-sm text-gray-900 border-b"},xt={class:"px-4 py-3 text-sm text-gray-900 border-b"},ft={class:"px-4 py-3 text-sm text-gray-900 border-b"},yt=["onClick"],vt={key:1},ht={class:"px-5 py-4 space-y-4"},wt={class:"px-5 py-4 space-y-4"},kt={class:"grid grid-cols-1 gap-4 md:grid-cols-3"},Tt={class:"md:col-span-1"},_t={class:"md:col-span-1"},St={class:"md:col-span-1"},jt={class:"flex items-center gap-3 mt-2"},At={class:"border rounded-lg p-3"},Mt={class:"flex items-center justify-between"},Ct={class:"text-sm font-semibold text-gray-800"},Rt=["disabled"],Nt={key:0,class:"text-xs text-gray-500 mt-2"},Pt={key:1,class:"text-xs text-gray-500 mt-2"},Lt={key:2,class:"mt-2 space-y-1 max-h-48 overflow-auto pr-1"},Et={class:"flex-1 min-w-0"},Ot={class:"font-medium truncate"},Dt={class:"text-xs text-gray-500"},Bt={class:"font-mono"},Jt={key:3,class:"mt-3 text-xs"},$t={class:"mb-1"},Kt={class:"w-full bg-gray-200 rounded h-2 overflow-hidden"},Ft={key:0,class:"mt-2 text-rose-600"},Ut={class:"flex items-center justify-end gap-3 px-5 py-4 border-t"},Vt=["disabled"],Yt={key:0,class:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},Gt={__name:"Index",setup(T){const _=m(!1),u=m(""),x=m(""),w=ke(),l=I({kdppk:"",KdJnsObat:"0",JnsTgl:"TGLPELSJP",TglMulai:"",TglAkhir:""}),C=m(!1),g=m(!1),k=m(null),r=I({nosjp:"",refasalsjp:"",noresep:""}),j=m(!1),R=m([]),F=m(!0),b=I({total:0,done:0,failed:0,failures:[]}),ce=async a=>{k.value=a,r.noresep=a.NORESEP??a.noresep??"",r.nosjp=a.NOSJP??a.nosjp??a.NOAPOTIK??a.noapotik??"",r.refasalsjp=a.REFASALSJP??a.refasalsjp??a.NOSEP_KUNJUNGAN??a.ref_asal_sjp??"",H(),await V(r.nosjp),C.value=!0},U=()=>{C.value=!1,g.value=!1,k.value=null,r.nosjp="",r.refasalsjp="",r.noresep="",R.value=[],H()},H=()=>{b.total=0,b.done=0,b.failed=0,b.failures=[]},Q=de(()=>!r.nosjp||!r.refasalsjp||!r.noresep),pe=a=>a?Array.isArray(a)?a:typeof a=="object"&&a.kodeobat?[a]:[]:[],V=async a=>{var t,s,o,S,y,E,A,L,se;if(R.value=[],!!a){j.value=!0;try{let N;try{N=await axios.get(`/apol/pelayanan/obat/daftar/${encodeURIComponent(a)}`)}catch{N=await axios.get("/apol/pelayanan/obat/daftar",{params:{nosep:a}})}const c=(N==null?void 0:N.data)||{};let ae=[];const ve=[c==null?void 0:c.listobat,(t=c==null?void 0:c.detailsep)==null?void 0:t.listobat,(s=c==null?void 0:c.data)==null?void 0:s.listobat,(S=(o=c==null?void 0:c.data)==null?void 0:o.detailsep)==null?void 0:S.listobat,(y=c==null?void 0:c.response)==null?void 0:y.listobat,(A=(E=c==null?void 0:c.response)==null?void 0:E.detailsep)==null?void 0:A.listobat];for(const v of ve){const oe=pe(v);if(oe.length){ae=oe;break}}R.value=ae.map(v=>({kodeobat:String(v.kodeobat??v.kdobat??"").trim(),namaobat:v.namaobat??v.nmobat??"-",tipeobat:(v.tipeobat??v.tipeObat??"N").toString().toUpperCase(),signa1:v.signa1??v.signa??null,signa2:v.signa2??null,jumlah:v.jumlah??v.qty??null,hari:v.hari??null,harga:v.harga??null}))}catch(N){d(((se=(L=N==null?void 0:N.response)==null?void 0:L.data)==null?void 0:se.message)||"Gagal memuat daftar obat")}finally{j.value=!1}}},me=async()=>{var a,t;if(H(),b.total=R.value.length,b.total!==0){for(const s of R.value)try{await axios.post("/apol/hapus-obat",{nosepapotek:String(r.nosjp).trim(),noresep:String(r.noresep).trim(),kodeobat:String(s.kodeobat).trim(),tipeobat:s.tipeobat||"N",verify:!0}),b.done+=1}catch(o){b.failed+=1,b.failures.push({kodeobat:s.kodeobat,message:((t=(a=o==null?void 0:o.response)==null?void 0:a.data)==null?void 0:t.message)||o.message||"Gagal hapus obat"})}await V(r.nosjp)}},ge=async()=>{var a,t,s;if(Q.value){d("Lengkapi No SJP/SEP Apotek, Ref Asal SJP, dan No Resep terlebih dahulu");return}g.value=!0;try{if(F.value&&(await me(),(((a=R.value)==null?void 0:a.length)??0)>0)){d(`Masih ada ${R.value.length} obat di resep ini. Resep belum dihapus.`);return}const{data:o}=await axios.post("/apol/hapus-resep",{nosjp:String(r.nosjp).trim(),refasalsjp:String(r.refasalsjp).trim(),noresep:String(r.noresep).trim()});if(o.success){d("Resep berhasil dihapus","success");const S=String(r.noresep).toUpperCase();f.value=f.value.filter(y=>String((y==null?void 0:y.NORESEP)??(y==null?void 0:y.noresep)??"").toUpperCase()!==S),U()}else d(o.message||"Gagal menghapus resep"),await V(r.nosjp)}catch(o){d(((s=(t=o==null?void 0:o.response)==null?void 0:t.data)==null?void 0:s.message)||o.message||"Terjadi kesalahan saat menghapus resep")}finally{g.value=!1}},be=()=>{l.kdppk=w.props.defaultKdppk||"",l.KdJnsObat="0",l.JnsTgl="TGLPELSJP",l.TglMulai="",l.TglAkhir="",u.value="",x.value="",f.value=[]},f=m([]),O=m(!1);z(async()=>{l.kdppk||(l.kdppk=w.props.defaultKdppk||"");const a=new Date,t=new Date(a.getFullYear(),a.getMonth(),1),s=new Date(a.getFullYear(),a.getMonth()+1,0);l.TglMulai=$(t).format("YYYY-MM-DDTHH:mm"),l.TglAkhir=$(s).format("YYYY-MM-DDTHH:mm"),l.kdppk&&l.TglMulai&&l.TglAkhir&&await X()});const d=(a,t="error")=>{t==="error"?(u.value=a,x.value=""):(x.value=a,u.value=""),setTimeout(()=>{u.value="",x.value=""},5e3)},X=async()=>{var a,t;if(!l.kdppk||!l.TglMulai||!l.TglAkhir){d("Kode PPK, tanggal mulai, dan tanggal akhir harus diisi");return}_.value=!0,u.value="",x.value="",f.value=[];try{const s=await axios.post("/apol/ajax/daftar-resep",l);s.data.success?(f.value=s.data.data||[],f.value.length>0?d(`Berhasil menemukan ${f.value.length} data resep`,"success"):d("Tidak ada data resep ditemukan untuk kriteria yang diberikan")):(f.value=[],d(s.data.message))}catch(s){d(((t=(a=s.response)==null?void 0:a.data)==null?void 0:t.message)||"Terjadi kesalahan saat mencari data"),f.value=[]}finally{_.value=!1}},Z=async a=>{var t,s;if(f.value.length===0){d("Tidak ada data untuk di-export. Lakukan pencarian terlebih dahulu.");return}O.value=!0;try{const o={...l,format:a},S=await axios.post("/apol/export-resep",o,{responseType:a==="excel"?"blob":"json"});if(a==="excel"){const y=new Blob([S.data],{type:"application/vnd.ms-excel"}),E=window.URL.createObjectURL(y),A=document.createElement("a");A.href=E,A.download=`daftar_resep_${$().format("YYYYMMDD_HHmmss")}.xls`,document.body.appendChild(A),A.click(),document.body.removeChild(A),window.URL.revokeObjectURL(E),d("Data berhasil di-export dalam format Excel (.xls)","success")}else if(S.data.success){const y=xe(S.data.data),E=new Blob([y],{type:"text/csv;charset=utf-8;"}),A=window.URL.createObjectURL(E),L=document.createElement("a");L.href=A,L.download=`daftar_resep_${$().format("YYYYMMDD_HHmmss")}.csv`,document.body.appendChild(L),L.click(),document.body.removeChild(L),window.URL.revokeObjectURL(A),d("Data berhasil di-export dalam format CSV","success")}else d(S.data.message||"Export gagal")}catch(o){d(((s=(t=o.response)==null?void 0:t.data)==null?void 0:s.message)||"Terjadi kesalahan saat export data")}finally{O.value=!1}},xe=a=>{if(!a||a.length===0)return"";const s=[["No","No. Resep","No. Apotek","No. SEP Kunjungan","No. Kartu","Nama Peserta","Tgl. Entry","Tgl. Resep","Tgl. Pelayanan","Biaya Tagih","Biaya Verifikasi","Jenis Obat","Faskes Asal","Flag Iter"].join(",")];return a.forEach((o,S)=>{const y=[S+1,`"${o.NORESEP||""}"`,`"${o.NOAPOTIK||""}"`,`"${o.NOSEP_KUNJUNGAN||""}"`,`"${o.NOKARTU||""}"`,`"${o.NAMA||""}"`,`"${D(o.TGLENTRY)}"`,`"${D(o.TGLRESEP)}"`,`"${D(o.TGLPELRSP)}"`,`"${o.BYTAGRSP||"0"}"`,`"${o.BYVERRSP||"0"}"`,`"${te(o.KDJNSOBAT)}"`,`"${o.FASKESASAL||""}"`,`"${o.FLAGITER==="True"?"Ya":"Tidak"}"`];s.push(y.join(","))}),s.join(`
`)},fe=async()=>{var a,t;if(!l.kdppk||!l.TglMulai||!l.TglAkhir){d("Lengkapi form pencarian terlebih dahulu");return}try{const s=await axios.post("/apol/summary-resep",l);if(s.data.success){const o=s.data.summary;d(`Summary: Total ${o.total_resep} resep ditemukan`,"success")}}catch(s){d(((t=(a=s.response)==null?void 0:a.data)==null?void 0:t.message)||"Terjadi kesalahan saat mengambil summary")}},ee=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(a||0),D=a=>a?$(a).format("DD-MM-YYYY"):"-",te=a=>{switch(String(a)){case"0":return"Semua";case"1":return"Obat PRB";case"2":return"Obat Kronis Belum Stabil";case"3":return"Obat Kemoterapi";default:return a??"-"}},ye=a=>{switch(String(a)){case"1":return"bg-green-100 text-green-800";case"2":return"bg-amber-100 text-amber-800";case"3":return"bg-purple-100 text-purple-800";case"0":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return(a,t)=>(i(),p(Y,null,[J(re(Te),{title:"APOL - Daftar Resep"}),e("div",Ke,[e("div",Fe,[e("div",Ue,[t[16]||(t[16]=e("h1",{class:"mb-2 text-2xl font-extrabold md:text-3xl md:mb-0"}," APOL - Daftar Resep ",-1)),e("button",{onClick:t[0]||(t[0]=s=>re(_e).visit("/")),class:"inline-flex gap-2 items-center px-5 py-2 font-semibold text-white bg-indigo-600 rounded-xl shadow-lg transition duration-300 ease-in-out transform hover:bg-indigo-700 hover:scale-105"},t[15]||(t[15]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M19 12H5"}),e("path",{d:"M12 19l-7-7 7-7"})],-1),h(" Kembali ")]))]),J($e,{flash:{error:u.value},onClearFlash:t[1]||(t[1]=s=>u.value="")},null,8,["flash"]),J(Oe,{flash:{success:x.value},onClearFlash:t[2]||(t[2]=s=>x.value="")},null,8,["flash"]),e("div",Ve,[t[24]||(t[24]=e("h2",{class:"mb-4 text-xl font-bold text-gray-800"},"Filter Daftar Resep",-1)),e("form",{onSubmit:Se(X,["prevent"]),class:"space-y-4"},[M(e("input",{type:"hidden","onUpdate:modelValue":t[3]||(t[3]=s=>l.kdppk=s)},null,512),[[B,l.kdppk]]),e("div",Ye,[e("div",null,[t[18]||(t[18]=e("label",{for:"KdJnsObat",class:"block mb-2 text-sm font-medium text-gray-700"}," Kode Jenis Obat ",-1)),M(e("select",{id:"KdJnsObat","onUpdate:modelValue":t[4]||(t[4]=s=>l.KdJnsObat=s),class:"px-3 py-2 w-full rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"},t[17]||(t[17]=[e("option",{value:"0"},"Semua",-1),e("option",{value:"1"},"Obat PRB",-1),e("option",{value:"2"},"Obat Kronis Belum Stabil",-1),e("option",{value:"3"},"Obat Kemoterapi",-1)]),512),[[ne,l.KdJnsObat]])]),e("div",null,[t[20]||(t[20]=e("label",{for:"JnsTgl",class:"block mb-2 text-sm font-medium text-gray-700"}," Jenis Tanggal ",-1)),M(e("select",{id:"JnsTgl","onUpdate:modelValue":t[5]||(t[5]=s=>l.JnsTgl=s),class:"px-3 py-2 w-full rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"},t[19]||(t[19]=[e("option",{value:"TGLPELSJP"},"Tanggal Pelayanan SJP",-1),e("option",{value:"TGLRSP"},"Tanggal Resep",-1)]),512),[[ne,l.JnsTgl]])]),e("div",null,[t[21]||(t[21]=e("label",{for:"TglMulai",class:"block mb-2 text-sm font-medium text-gray-700"}," Tanggal Mulai * ",-1)),M(e("input",{id:"TglMulai","onUpdate:modelValue":t[6]||(t[6]=s=>l.TglMulai=s),type:"datetime-local",class:"px-3 py-2 w-full rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",required:""},null,512),[[B,l.TglMulai]])]),e("div",null,[t[22]||(t[22]=e("label",{for:"TglAkhir",class:"block mb-2 text-sm font-medium text-gray-700"}," Tanggal Akhir * ",-1)),M(e("input",{id:"TglAkhir","onUpdate:modelValue":t[7]||(t[7]=s=>l.TglAkhir=s),type:"datetime-local",class:"px-3 py-2 w-full rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",required:""},null,512),[[B,l.TglAkhir]])])]),e("div",Ge,[e("button",{type:"submit",disabled:_.value,class:"flex gap-2 items-center px-6 py-2 font-semibold text-white bg-green-600 rounded-lg transition duration-300 hover:bg-green-700 disabled:bg-green-400"},[_.value?(i(),p("svg",He,t[23]||(t[23]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):P("",!0),h(" "+n(_.value?"Mencari...":"Cari Data"),1)],8,ze),e("button",{type:"button",onClick:be,class:"px-6 py-2 font-semibold text-white bg-gray-500 rounded-lg transition duration-300 hover:bg-gray-600"}," Reset "),e("button",{type:"button",onClick:fe,disabled:_.value,class:"px-6 py-2 font-semibold text-white bg-blue-500 rounded-lg transition duration-300 hover:bg-blue-600 disabled:bg-blue-400"}," Summary ",8,Ie)])],32)]),f.value.length>0?(i(),p("div",We,[t[27]||(t[27]=e("h3",{class:"mb-3 text-lg font-bold text-gray-800"},"Export Data",-1)),e("div",qe,[e("button",{onClick:t[8]||(t[8]=s=>Z("excel")),disabled:O.value,class:"flex gap-2 items-center px-4 py-2 font-semibold text-white bg-emerald-600 rounded-lg transition duration-300 hover:bg-emerald-700 disabled:bg-emerald-400"},[t[25]||(t[25]=e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)),h(" "+n(O.value?"Exporting...":"Excel"),1)],8,Qe),e("button",{onClick:t[9]||(t[9]=s=>Z("csv")),disabled:O.value,class:"flex gap-2 items-center px-4 py-2 font-semibold text-white bg-orange-600 rounded-lg transition duration-300 hover:bg-orange-700 disabled:bg-orange-400"},[t[26]||(t[26]=e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)),h(" "+n(O.value?"Exporting...":"CSV"),1)],8,Xe)])])):P("",!0),e("div",Ze,[e("h3",et," Daftar Resep Ditemukan ("+n(f.value.length)+" data) ",1),e("div",tt,[e("table",st,[t[30]||(t[30]=e("thead",{class:"bg-gray-100"},[e("tr",null,[e("th",{class:"px-4 py-3 text-sm font-medium text-left text-gray-700 border-b"},"No"),e("th",{class:"px-4 py-3 text-sm font-medium text-left text-gray-700 border-b"},"No. Resep "),e("th",{class:"px-4 py-3 text-sm font-medium text-left text-gray-700 border-b"},"No. Apotek "),e("th",{class:"px-4 py-3 text-sm font-medium text-left text-gray-700 border-b"},"No. SEP Kunjungan"),e("th",{class:"px-4 py-3 text-sm font-medium text-left text-gray-700 border-b"},"No. Kartu "),e("th",{class:"px-4 py-3 text-sm font-medium text-left text-gray-700 border-b"},"Nama Peserta "),e("th",{class:"px-4 py-3 text-sm font-medium text-left text-gray-700 border-b"},"Tgl. Entry "),e("th",{class:"px-4 py-3 text-sm font-medium text-left text-gray-700 border-b"},"Tgl. Resep "),e("th",{class:"px-4 py-3 text-sm font-medium text-left text-gray-700 border-b"},"Tgl. Pelayanan"),e("th",{class:"px-4 py-3 text-sm font-medium text-left text-gray-700 border-b"},"Biaya Tagih "),e("th",{class:"px-4 py-3 text-sm font-medium text-left text-gray-700 border-b"},"Biaya Verifikasi"),e("th",{class:"px-4 py-3 text-sm font-medium text-left text-gray-700 border-b"},"Jenis Obat "),e("th",{class:"px-4 py-3 text-sm font-medium text-left text-gray-700 border-b"},"Faskes Asal "),e("th",{class:"px-4 py-3 text-sm font-medium text-left text-gray-700 border-b"},"Flag Iter "),e("th",{class:"px-4 py-3 text-sm font-medium text-left text-gray-700 border-b"},"Aksi")])],-1)),e("tbody",null,[f.value&&f.value.length>0?(i(!0),p(Y,{key:0},ie(f.value,(s,o)=>(i(),p("tr",{key:o,class:"hover:bg-gray-50"},[e("td",at,n(o+1),1),e("td",ot,n(s.NORESEP||"-"),1),e("td",lt,n(s.NOAPOTIK||"-"),1),e("td",rt,n(s.NOSEP_KUNJUNGAN||"-"),1),e("td",nt,n(s.NOKARTU||"-"),1),e("td",it,n(s.NAMA||"-"),1),e("td",dt,n(D(s.TGLENTRY)),1),e("td",ut,n(D(s.TGLRESEP)),1),e("td",ct,n(D(s.TGLPELRSP)),1),e("td",pt,n(ee(s.BYTAGRSP)),1),e("td",mt,n(ee(s.BYVERRSP)),1),e("td",gt,[e("span",{class:W(["px-2 py-1 text-xs rounded-full",ye(s.KDJNSOBAT)])},n(te(s.KDJNSOBAT)),3)]),e("td",bt,n(s.FASKESASAL||"-"),1),e("td",xt,[e("span",{class:W(["px-2 py-1 text-xs rounded-full",s.FLAGITER==="True"?"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-800"])},n(s.FLAGITER==="True"?"Ya":"Tidak"),3)]),e("td",ft,[e("button",{type:"button",onClick:S=>ce(s),class:"inline-flex items-center gap-2 px-3 py-1.5 rounded-md bg-rose-600 text-white hover:bg-rose-700 focus:outline-none focus:ring-2 focus:ring-rose-500/40",title:"Hapus resep ini dari APOL"},t[28]||(t[28]=[Me('<svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-e6190ac3><polyline points="3 6 5 6 21 6" data-v-e6190ac3></polyline><path d="M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6" data-v-e6190ac3></path><path d="M10 11v6" data-v-e6190ac3></path><path d="M14 11v6" data-v-e6190ac3></path><path d="M9 6V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2" data-v-e6190ac3></path></svg> Hapus ',2)]),8,yt)])]))),128)):(i(),p("tr",vt,t[29]||(t[29]=[e("td",{colspan:"14",class:"px-4 py-8 text-center text-gray-500"},[e("div",{class:"flex flex-col items-center"},[e("svg",{class:"w-12 h-12 mb-2 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),e("p",{class:"text-lg font-medium"},"Tidak ada data resep"),e("p",{class:"text-sm"},"Silakan lakukan pencarian untuk menampilkan data")])],-1)])))])])]),J(Ne,{show:C.value,"max-width":"2xl",onClose:U},{default:K(()=>[e("div",{class:"flex items-center justify-between px-5 py-4 border-b"},[t[32]||(t[32]=e("h3",{class:"text-lg font-semibold"},"Hapus Resep",-1)),e("button",{onClick:U,class:"text-gray-500 hover:text-gray-700"},t[31]||(t[31]=[e("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))]),e("div",ht,[e("div",wt,[t[38]||(t[38]=e("p",{class:"text-sm text-gray-600"},[h(" Pastikan "),e("b",null,"No Resep"),h(", "),e("b",null,"No SEP Apotek/SJP"),h(", dan "),e("b",null,"Ref Asal SJP"),h(" sesuai. Centang opsi di bawah untuk menghapus "),e("b",null,"semua obat"),h(" lebih dulu (disarankan). ")],-1)),e("div",kt,[e("div",Tt,[t[33]||(t[33]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"No Resep",-1)),M(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>r.noresep=s),type:"text",class:"w-full px-3 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-rose-500 focus:border-transparent",placeholder:"Contoh: 0SI44"},null,512),[[B,r.noresep]])]),e("div",_t,[t[34]||(t[34]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"No SEP Apotek/SJP",-1)),M(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>r.nosjp=s),type:"text",class:"w-full px-3 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-rose-500 focus:border-transparent",placeholder:"Contoh: 1801A00104190000001"},null,512),[[B,r.nosjp]])]),e("div",St,[t[35]||(t[35]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"Ref Asal SJP",-1)),M(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>r.refasalsjp=s),type:"text",class:"w-full px-3 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-rose-500 focus:border-transparent",placeholder:"Contoh: 1801R0010419V000001"},null,512),[[B,r.refasalsjp]])])]),e("div",jt,[M(e("input",{id:"purgeFirst",type:"checkbox","onUpdate:modelValue":t[13]||(t[13]=s=>F.value=s),class:"w-4 h-4 rounded border-gray-300 text-rose-600 focus:ring-rose-500"},null,512),[[je,F.value]]),t[36]||(t[36]=e("label",{for:"purgeFirst",class:"text-sm text-gray-700"},[h(" Hapus "),e("b",null,"semua obat"),h(" pada resep ini sebelum hapus resep ")],-1))]),e("div",At,[e("div",Mt,[e("h4",Ct," Daftar Obat ("+n(j.value?"memuat...":R.value.length+" item")+") ",1),e("button",{class:"text-xs px-2 py-1 rounded border border-gray-300 hover:bg-gray-50",onClick:t[14]||(t[14]=s=>V(r.nosjp)),disabled:j.value}," Muat Ulang ",8,Rt)]),j.value?(i(),p("div",Nt,"Mengambil data... ")):R.value.length===0?(i(),p("div",Pt,"Tidak ada obat.")):(i(),p("ul",Lt,[(i(!0),p(Y,null,ie(R.value,(s,o)=>(i(),p("li",{key:o,class:"text-sm flex items-center justify-between border-b last:border-0 py-1"},[e("div",Et,[e("div",Ot,n(s.namaobat),1),e("div",Dt,[t[37]||(t[37]=h(" Kode: ")),e("span",Bt,n(s.kodeobat),1),h(" · Tipe: "+n(s.tipeobat||"N")+" ",1),s.jumlah?(i(),p(Y,{key:0},[h(" · Jml: "+n(s.jumlah),1)],64)):P("",!0)])])]))),128))])),g.value&&F.value?(i(),p("div",Jt,[e("div",$t,"Menghapus obat: "+n(b.done)+"/"+n(b.total)+" selesai, gagal: "+n(b.failed),1),e("div",Kt,[e("div",{class:"h-2 bg-rose-600",style:Ae({width:(b.total?b.done/b.total*100:0)+"%"})},null,4)]),b.failed>0?(i(),p("div",Ft," Beberapa obat gagal dihapus. Resep tidak akan dihapus sampai semua obat terhapus. ")):P("",!0)])):P("",!0)])])]),e("div",Ut,[e("button",{onClick:U,class:"px-4 py-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50"}," Batal "),e("button",{disabled:g.value||Q.value,onClick:ge,class:"inline-flex items-center gap-2 px-5 py-2 rounded-lg text-white bg-rose-600 hover:bg-rose-700 disabled:bg-rose-400"},[g.value?(i(),p("svg",Yt,t[39]||(t[39]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):P("",!0),h(" "+n(g.value?"Memproses...":"Hapus Resep"),1)],8,Vt)])]),_:1},8,["show"])])])])],64))}},It=Ce(Gt,[["__scopeId","data-v-e6190ac3"]]);export{It as default};
