import{g as y,m as be,p as Y,h as xe,i as me,q as E,c as u,o as p,d as J,a as e,u as te,k as fe,b as w,W as ve,s as m,x as $,t as r,T as z,y as ye,l as T,z as C,v as se,F as B,e as ae,A as he,B as ke,n as oe,C as we}from"./app-CYxgyvjV.js";import{_ as Te}from"./_plugin-vue_export-helper-DlAUqK2U.js";const _e={class:"p-4 min-h-screen bg-pattern md:p-6"},Se={class:"mx-auto max-w-8xl"},Le={class:"flex flex-col px-6 py-4 mb-6 text-white bg-gradient-to-r from-teal-500 to-blue-500 rounded-xl shadow-2xl md:flex-row md:items-center md:justify-between"},Me={key:0,class:"fixed top-4 right-4 z-50 w-full max-w-sm"},Ae={class:"p-4 bg-red-50 rounded-lg border border-red-200 shadow-lg"},Pe={class:"flex items-start"},Ne={class:"flex-1 ml-3"},je={class:"mt-1 text-sm text-red-700"},Ce={class:"flex-shrink-0 ml-4"},Re={key:0,class:"fixed top-4 right-4 z-50 w-full max-w-sm"},Ee={class:"p-4 bg-green-50 rounded-lg border border-green-200 shadow-lg"},Oe={class:"flex items-start"},De={class:"flex-1 ml-3"},Je={class:"mt-1 text-sm text-green-700"},Be={class:"flex-shrink-0 ml-4"},Ke={class:"p-6 mb-6 bg-white rounded-xl shadow-lg"},Ve={class:"grid grid-cols-1 gap-4 md:grid-cols-3"},Ue={class:"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-gray-100 text-gray-800 border border-gray-200"},Ye={class:"font-semibold"},$e={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},ze={class:"flex gap-3 flex-wrap"},Fe=["disabled"],Ge={key:0,class:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},He=["disabled"],Ie={key:0,class:"p-4 mb-6 bg-white rounded-xl shadow-lg"},qe={class:"flex gap-3"},We=["disabled"],Qe=["disabled"],Xe={class:"p-6 mb-6 bg-white rounded-xl shadow-lg"},Ze={class:"mb-4 text-lg font-bold text-gray-800"},et={class:"overflow-x-auto"},tt={class:"min-w-full bg-white rounded-lg border border-gray-200"},st={class:"px-4 py-3 text-sm text-gray-900 border-b"},at={class:"px-4 py-3 text-sm text-gray-900 border-b font-medium"},ot={class:"px-4 py-3 text-sm text-gray-900 border-b"},lt={class:"px-4 py-3 text-sm text-gray-900 border-b font-medium text-blue-600"},rt={class:"px-4 py-3 text-sm text-gray-900 border-b"},nt={class:"px-4 py-3 text-sm text-gray-900 border-b font-medium"},dt={class:"px-4 py-3 text-sm text-gray-900 border-b"},it={class:"px-4 py-3 text-sm text-gray-900 border-b"},ut={class:"px-4 py-3 text-sm text-gray-900 border-b"},pt={class:"px-4 py-3 text-sm text-gray-900 border-b text-right font-medium"},gt={class:"px-4 py-3 text-sm text-gray-900 border-b text-right"},ct={class:"px-4 py-3 text-sm text-gray-900 border-b"},bt={class:"px-4 py-3 text-sm text-gray-900 border-b"},xt={class:"px-4 py-3 text-sm text-gray-900 border-b"},mt={class:"px-4 py-3 text-sm text-gray-900 border-b"},ft=["onClick"],vt={key:1},yt={key:0,class:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50 p-4"},ht={class:"w-full max-w-2xl rounded-xl bg-white shadow-2xl"},kt={class:"px-5 py-4 space-y-4"},wt={class:"grid grid-cols-1 gap-4 md:grid-cols-3"},Tt={class:"md:col-span-1"},_t={class:"md:col-span-1"},St={class:"md:col-span-1"},Lt={class:"flex items-center gap-3 mt-2"},Mt={class:"border rounded-lg p-3"},At={class:"flex items-center justify-between"},Pt={class:"text-sm font-semibold text-gray-800"},Nt=["disabled"],jt={key:0,class:"text-xs text-gray-500 mt-2"},Ct={key:1,class:"text-xs text-gray-500 mt-2"},Rt={key:2,class:"mt-2 space-y-1 max-h-48 overflow-auto pr-1"},Et={class:"flex-1 min-w-0"},Ot={class:"font-medium truncate"},Dt={class:"text-xs text-gray-500"},Jt={class:"font-mono"},Bt={key:3,class:"mt-3 text-xs"},Kt={class:"mb-1"},Vt={class:"w-full bg-gray-200 rounded h-2 overflow-hidden"},Ut={key:0,class:"mt-2 text-rose-600"},Yt={class:"flex items-center justify-end gap-3 px-5 py-4 border-t"},$t=["disabled"],zt={key:0,class:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},Ft={__name:"Index",setup(Gt){const P=y(!1),_=y(""),S=y(""),F=be(),l=Y({kdppk:"",KdJnsObat:"0",JnsTgl:"TGLPELSJP",TglMulai:"",TglAkhir:""}),K=y(!1),M=y(!1),G=y(null),n=Y({nosjp:"",refasalsjp:"",noresep:""}),R=y(!1),h=y([]),O=y(!0),g=Y({total:0,done:0,failed:0,failures:[]}),le=async a=>{G.value=a,n.noresep=a.NORESEP??a.noresep??"",n.nosjp=a.NOSJP??a.nosjp??a.NOAPOTIK??a.noapotik??"",n.refasalsjp=a.REFASALSJP??a.refasalsjp??a.NOSEP_KUNJUNGAN??a.ref_asal_sjp??"",U(),await D(n.nosjp),K.value=!0},V=()=>{K.value=!1,M.value=!1,G.value=null,n.nosjp="",n.refasalsjp="",n.noresep="",h.value=[],U()},U=()=>{g.total=0,g.done=0,g.failed=0,g.failures=[]},H=xe(()=>!n.nosjp||!n.refasalsjp||!n.noresep),re=a=>a?Array.isArray(a)?a:typeof a=="object"&&a.kodeobat?[a]:[]:[],D=async a=>{var t,s,o,f,b,A,v,L,X;if(h.value=[],!!a){R.value=!0;try{let k;try{k=await axios.get(`/apol/pelayanan/obat/daftar/${encodeURIComponent(a)}`)}catch{k=await axios.get("/apol/pelayanan/obat/daftar",{params:{nosep:a}})}const i=(k==null?void 0:k.data)||{};let Z=[];const ce=[i==null?void 0:i.listobat,(t=i==null?void 0:i.detailsep)==null?void 0:t.listobat,(s=i==null?void 0:i.data)==null?void 0:s.listobat,(f=(o=i==null?void 0:i.data)==null?void 0:o.detailsep)==null?void 0:f.listobat,(b=i==null?void 0:i.response)==null?void 0:b.listobat,(v=(A=i==null?void 0:i.response)==null?void 0:A.detailsep)==null?void 0:v.listobat];for(const x of ce){const ee=re(x);if(ee.length){Z=ee;break}}h.value=Z.map(x=>({kodeobat:String(x.kodeobat??x.kdobat??"").trim(),namaobat:x.namaobat??x.nmobat??"-",tipeobat:(x.tipeobat??x.tipeObat??"N").toString().toUpperCase(),signa1:x.signa1??x.signa??null,signa2:x.signa2??null,jumlah:x.jumlah??x.qty??null,hari:x.hari??null,harga:x.harga??null}))}catch(k){d(((X=(L=k==null?void 0:k.response)==null?void 0:L.data)==null?void 0:X.message)||"Gagal memuat daftar obat")}finally{R.value=!1}}},ne=async()=>{var a,t;if(U(),g.total=h.value.length,g.total!==0){for(const s of h.value)try{await axios.post("/apol/hapus-obat",{nosepapotek:String(n.nosjp).trim(),noresep:String(n.noresep).trim(),kodeobat:String(s.kodeobat).trim(),tipeobat:s.tipeobat||"N",verify:!0}),g.done+=1}catch(o){g.failed+=1,g.failures.push({kodeobat:s.kodeobat,message:((t=(a=o==null?void 0:o.response)==null?void 0:a.data)==null?void 0:t.message)||o.message||"Gagal hapus obat"})}await D(n.nosjp)}},de=async()=>{var a,t,s;if(H.value){d("Lengkapi No SJP/SEP Apotek, Ref Asal SJP, dan No Resep terlebih dahulu");return}M.value=!0;try{if(O.value&&(await ne(),(((a=h.value)==null?void 0:a.length)??0)>0)){d(`Masih ada ${h.value.length} obat di resep ini. Resep belum dihapus.`);return}const{data:o}=await axios.post("/apol/hapus-resep",{nosjp:String(n.nosjp).trim(),refasalsjp:String(n.refasalsjp).trim(),noresep:String(n.noresep).trim()});if(o.success){d("Resep berhasil dihapus","success");const f=String(n.noresep).toUpperCase();c.value=c.value.filter(b=>String((b==null?void 0:b.NORESEP)??(b==null?void 0:b.noresep)??"").toUpperCase()!==f),V()}else d(o.message||"Gagal menghapus resep"),await D(n.nosjp)}catch(o){d(((s=(t=o==null?void 0:o.response)==null?void 0:t.data)==null?void 0:s.message)||o.message||"Terjadi kesalahan saat menghapus resep")}finally{M.value=!1}},ie=()=>{l.kdppk=F.props.defaultKdppk||"",l.KdJnsObat="0",l.JnsTgl="TGLPELSJP",l.TglMulai="",l.TglAkhir="",_.value="",S.value="",c.value=[]},c=y([]),N=y(!1);me(async()=>{l.kdppk||(l.kdppk=F.props.defaultKdppk||"");const a=new Date,t=new Date(a.getFullYear(),a.getMonth(),1),s=new Date(a.getFullYear(),a.getMonth()+1,0);l.TglMulai=E(t).format("YYYY-MM-DDTHH:mm"),l.TglAkhir=E(s).format("YYYY-MM-DDTHH:mm"),l.kdppk&&l.TglMulai&&l.TglAkhir&&await I()});const d=(a,t="error")=>{t==="error"?(_.value=a,S.value=""):(S.value=a,_.value=""),setTimeout(()=>{_.value="",S.value=""},5e3)},I=async()=>{var a,t;if(!l.kdppk||!l.TglMulai||!l.TglAkhir){d("Kode PPK, tanggal mulai, dan tanggal akhir harus diisi");return}P.value=!0,_.value="",S.value="",c.value=[];try{const s=await axios.post("/apol/ajax/daftar-resep",l);s.data.success?(c.value=s.data.data||[],c.value.length>0?d(`Berhasil menemukan ${c.value.length} data resep`,"success"):d("Tidak ada data resep ditemukan untuk kriteria yang diberikan")):(c.value=[],d(s.data.message))}catch(s){d(((t=(a=s.response)==null?void 0:a.data)==null?void 0:t.message)||"Terjadi kesalahan saat mencari data"),c.value=[]}finally{P.value=!1}},q=async a=>{var t,s;if(c.value.length===0){d("Tidak ada data untuk di-export. Lakukan pencarian terlebih dahulu.");return}N.value=!0;try{const o={...l,format:a},f=await axios.post("/apol/export-resep",o,{responseType:a==="excel"?"blob":"json"});if(a==="excel"){const b=new Blob([f.data],{type:"application/vnd.ms-excel"}),A=window.URL.createObjectURL(b),v=document.createElement("a");v.href=A,v.download=`daftar_resep_${E().format("YYYYMMDD_HHmmss")}.xls`,document.body.appendChild(v),v.click(),document.body.removeChild(v),window.URL.revokeObjectURL(A),d("Data berhasil di-export dalam format Excel (.xls)","success")}else if(f.data.success){const b=ue(f.data.data),A=new Blob([b],{type:"text/csv;charset=utf-8;"}),v=window.URL.createObjectURL(A),L=document.createElement("a");L.href=v,L.download=`daftar_resep_${E().format("YYYYMMDD_HHmmss")}.csv`,document.body.appendChild(L),L.click(),document.body.removeChild(L),window.URL.revokeObjectURL(v),d("Data berhasil di-export dalam format CSV","success")}else d(f.data.message||"Export gagal")}catch(o){d(((s=(t=o.response)==null?void 0:t.data)==null?void 0:s.message)||"Terjadi kesalahan saat export data")}finally{N.value=!1}},ue=a=>{if(!a||a.length===0)return"";const s=[["No","No. Resep","No. Apotek","No. SEP Kunjungan","No. Kartu","Nama Peserta","Tgl. Entry","Tgl. Resep","Tgl. Pelayanan","Biaya Tagih","Biaya Verifikasi","Jenis Obat","Faskes Asal","Flag Iter"].join(",")];return a.forEach((o,f)=>{const b=[f+1,`"${o.NORESEP||""}"`,`"${o.NOAPOTIK||""}"`,`"${o.NOSEP_KUNJUNGAN||""}"`,`"${o.NOKARTU||""}"`,`"${o.NAMA||""}"`,`"${j(o.TGLENTRY)}"`,`"${j(o.TGLRESEP)}"`,`"${j(o.TGLPELRSP)}"`,`"${o.BYTAGRSP||"0"}"`,`"${o.BYVERRSP||"0"}"`,`"${Q(o.KDJNSOBAT)}"`,`"${o.FASKESASAL||""}"`,`"${o.FLAGITER==="True"?"Ya":"Tidak"}"`];s.push(b.join(","))}),s.join(`
`)},pe=async()=>{var a,t;if(!l.kdppk||!l.TglMulai||!l.TglAkhir){d("Lengkapi form pencarian terlebih dahulu");return}try{const s=await axios.post("/apol/summary-resep",l);if(s.data.success){const o=s.data.summary;d(`Summary: Total ${o.total_resep} resep ditemukan`,"success")}}catch(s){d(((t=(a=s.response)==null?void 0:a.data)==null?void 0:t.message)||"Terjadi kesalahan saat mengambil summary")}},W=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(a||0),j=a=>a?E(a).format("DD-MM-YYYY"):"-",Q=a=>{switch(a){case"0":return"Semua";case"1":return"Generik";case"2":return"Paten";default:return a||"-"}},ge=a=>{switch(a){case"1":return"bg-green-100 text-green-800";case"2":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return(a,t)=>(p(),u(B,null,[J(te(fe),{title:"APOL - Daftar Resep"}),e("div",_e,[e("div",Se,[e("div",Le,[t[16]||(t[16]=e("h1",{class:"mb-2 text-2xl font-extrabold md:text-3xl md:mb-0"}," APOL - Daftar Resep ",-1)),e("button",{onClick:t[0]||(t[0]=s=>te(ve).visit("/")),class:"inline-flex gap-2 items-center px-5 py-2 font-semibold text-white bg-indigo-600 rounded-xl shadow-lg transition duration-300 ease-in-out transform hover:bg-indigo-700 hover:scale-105"},t[15]||(t[15]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M19 12H5"}),e("path",{d:"M12 19l-7-7 7-7"})],-1),m(" Kembali ")]))]),J(z,{name:"toast"},{default:$(()=>[_.value?(p(),u("div",Me,[e("div",Ae,[e("div",Pe,[t[19]||(t[19]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"w-5 h-5 text-red-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),e("div",Ne,[t[17]||(t[17]=e("h3",{class:"text-sm font-medium text-red-800"},"Error!",-1)),e("p",je,r(_.value),1)]),e("div",Ce,[e("button",{onClick:t[1]||(t[1]=s=>_.value=""),class:"inline-flex text-red-400 hover:text-red-600 focus:outline-none"},t[18]||(t[18]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))])])])])):w("",!0)]),_:1}),J(z,{name:"toast"},{default:$(()=>[S.value?(p(),u("div",Re,[e("div",Ee,[e("div",Oe,[t[22]||(t[22]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"w-5 h-5 text-green-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})])],-1)),e("div",De,[t[20]||(t[20]=e("h3",{class:"text-sm font-medium text-green-800"},"Success!",-1)),e("p",Je,r(S.value),1)]),e("div",Be,[e("button",{onClick:t[2]||(t[2]=s=>S.value=""),class:"inline-flex text-green-400 hover:text-green-600 focus:outline-none"},t[21]||(t[21]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))])])])])):w("",!0)]),_:1}),e("div",Ke,[t[32]||(t[32]=e("h2",{class:"mb-4 text-xl font-bold text-gray-800"},"Filter Daftar Resep",-1)),e("form",{onSubmit:ye(I,["prevent"]),class:"space-y-4"},[e("div",Ve,[e("div",null,[t[24]||(t[24]=e("label",{class:"block mb-2 text-sm font-medium text-gray-700"}," Kode PPK ",-1)),e("div",Ue,[t[23]||(t[23]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M20 6L9 17l-5-5"})],-1)),e("span",Ye,r(l.kdppk||"-"),1)]),T(e("input",{type:"hidden","onUpdate:modelValue":t[3]||(t[3]=s=>l.kdppk=s)},null,512),[[C,l.kdppk]])]),e("div",null,[t[26]||(t[26]=e("label",{for:"KdJnsObat",class:"block mb-2 text-sm font-medium text-gray-700"}," Kode Jenis Obat ",-1)),T(e("select",{id:"KdJnsObat","onUpdate:modelValue":t[4]||(t[4]=s=>l.KdJnsObat=s),class:"px-3 py-2 w-full rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"},t[25]||(t[25]=[e("option",{value:"0"},"Semua Jenis Obat",-1),e("option",{value:"1"},"Obat Generik",-1),e("option",{value:"2"},"Obat Paten",-1)]),512),[[se,l.KdJnsObat]])]),e("div",null,[t[28]||(t[28]=e("label",{for:"JnsTgl",class:"block mb-2 text-sm font-medium text-gray-700"}," Jenis Tanggal ",-1)),T(e("select",{id:"JnsTgl","onUpdate:modelValue":t[5]||(t[5]=s=>l.JnsTgl=s),class:"px-3 py-2 w-full rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"},t[27]||(t[27]=[e("option",{value:"TGLPELSJP"},"Tanggal Pelayanan SJP",-1)]),512),[[se,l.JnsTgl]])])]),e("div",$e,[e("div",null,[t[29]||(t[29]=e("label",{for:"TglMulai",class:"block mb-2 text-sm font-medium text-gray-700"}," Tanggal Mulai * ",-1)),T(e("input",{id:"TglMulai","onUpdate:modelValue":t[6]||(t[6]=s=>l.TglMulai=s),type:"datetime-local",class:"px-3 py-2 w-full rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",required:""},null,512),[[C,l.TglMulai]])]),e("div",null,[t[30]||(t[30]=e("label",{for:"TglAkhir",class:"block mb-2 text-sm font-medium text-gray-700"}," Tanggal Akhir * ",-1)),T(e("input",{id:"TglAkhir","onUpdate:modelValue":t[7]||(t[7]=s=>l.TglAkhir=s),type:"datetime-local",class:"px-3 py-2 w-full rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",required:""},null,512),[[C,l.TglAkhir]])])]),e("div",ze,[e("button",{type:"submit",disabled:P.value,class:"flex gap-2 items-center px-6 py-2 font-semibold text-white bg-green-600 rounded-lg transition duration-300 hover:bg-green-700 disabled:bg-green-400"},[P.value?(p(),u("svg",Ge,t[31]||(t[31]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):w("",!0),m(" "+r(P.value?"Mencari...":"Cari Data"),1)],8,Fe),e("button",{type:"button",onClick:ie,class:"px-6 py-2 font-semibold text-white bg-gray-500 rounded-lg transition duration-300 hover:bg-gray-600"}," Reset "),e("button",{type:"button",onClick:pe,disabled:P.value,class:"px-6 py-2 font-semibold text-white bg-blue-500 rounded-lg transition duration-300 hover:bg-blue-600 disabled:bg-blue-400"}," Summary ",8,He)])],32)]),c.value.length>0?(p(),u("div",Ie,[t[35]||(t[35]=e("h3",{class:"mb-3 text-lg font-bold text-gray-800"},"Export Data",-1)),e("div",qe,[e("button",{onClick:t[8]||(t[8]=s=>q("excel")),disabled:N.value,class:"flex gap-2 items-center px-4 py-2 font-semibold text-white bg-emerald-600 rounded-lg transition duration-300 hover:bg-emerald-700 disabled:bg-emerald-400"},[t[33]||(t[33]=e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)),m(" "+r(N.value?"Exporting...":"Excel"),1)],8,We),e("button",{onClick:t[9]||(t[9]=s=>q("csv")),disabled:N.value,class:"flex gap-2 items-center px-4 py-2 font-semibold text-white bg-orange-600 rounded-lg transition duration-300 hover:bg-orange-700 disabled:bg-orange-400"},[t[34]||(t[34]=e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)),m(" "+r(N.value?"Exporting...":"CSV"),1)],8,Qe)])])):w("",!0),e("div",Xe,[e("h3",Ze," Daftar Resep Ditemukan ("+r(c.value.length)+" data) ",1),e("div",et,[e("table",tt,[t[38]||(t[38]=e("thead",{class:"bg-gray-100"},[e("tr",null,[e("th",{class:"px-4 py-3 text-sm font-medium text-left text-gray-700 border-b"},"No"),e("th",{class:"px-4 py-3 text-sm font-medium text-left text-gray-700 border-b"},"No. Resep "),e("th",{class:"px-4 py-3 text-sm font-medium text-left text-gray-700 border-b"},"No. Apotek "),e("th",{class:"px-4 py-3 text-sm font-medium text-left text-gray-700 border-b"},"No. SEP Kunjungan"),e("th",{class:"px-4 py-3 text-sm font-medium text-left text-gray-700 border-b"},"No. Kartu "),e("th",{class:"px-4 py-3 text-sm font-medium text-left text-gray-700 border-b"},"Nama Peserta "),e("th",{class:"px-4 py-3 text-sm font-medium text-left text-gray-700 border-b"},"Tgl. Entry "),e("th",{class:"px-4 py-3 text-sm font-medium text-left text-gray-700 border-b"},"Tgl. Resep "),e("th",{class:"px-4 py-3 text-sm font-medium text-left text-gray-700 border-b"},"Tgl. Pelayanan"),e("th",{class:"px-4 py-3 text-sm font-medium text-left text-gray-700 border-b"},"Biaya Tagih "),e("th",{class:"px-4 py-3 text-sm font-medium text-left text-gray-700 border-b"},"Biaya Verifikasi"),e("th",{class:"px-4 py-3 text-sm font-medium text-left text-gray-700 border-b"},"Jenis Obat "),e("th",{class:"px-4 py-3 text-sm font-medium text-left text-gray-700 border-b"},"Faskes Asal "),e("th",{class:"px-4 py-3 text-sm font-medium text-left text-gray-700 border-b"},"Flag Iter "),e("th",{class:"px-4 py-3 text-sm font-medium text-left text-gray-700 border-b"},"Aksi")])],-1)),e("tbody",null,[c.value&&c.value.length>0?(p(!0),u(B,{key:0},ae(c.value,(s,o)=>(p(),u("tr",{key:o,class:"hover:bg-gray-50"},[e("td",st,r(o+1),1),e("td",at,r(s.NORESEP||"-"),1),e("td",ot,r(s.NOAPOTIK||"-"),1),e("td",lt,r(s.NOSEP_KUNJUNGAN||"-"),1),e("td",rt,r(s.NOKARTU||"-"),1),e("td",nt,r(s.NAMA||"-"),1),e("td",dt,r(j(s.TGLENTRY)),1),e("td",it,r(j(s.TGLRESEP)),1),e("td",ut,r(j(s.TGLPELRSP)),1),e("td",pt,r(W(s.BYTAGRSP)),1),e("td",gt,r(W(s.BYVERRSP)),1),e("td",ct,[e("span",{class:oe(["px-2 py-1 text-xs rounded-full",ge(s.KDJNSOBAT)])},r(Q(s.KDJNSOBAT)),3)]),e("td",bt,r(s.FASKESASAL||"-"),1),e("td",xt,[e("span",{class:oe(["px-2 py-1 text-xs rounded-full",s.FLAGITER==="True"?"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-800"])},r(s.FLAGITER==="True"?"Ya":"Tidak"),3)]),e("td",mt,[e("button",{type:"button",onClick:f=>le(s),class:"inline-flex items-center gap-2 px-3 py-1.5 rounded-md bg-rose-600 text-white hover:bg-rose-700 focus:outline-none focus:ring-2 focus:ring-rose-500/40",title:"Hapus resep ini dari APOL"},t[36]||(t[36]=[we('<svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-fec84786><polyline points="3 6 5 6 21 6" data-v-fec84786></polyline><path d="M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6" data-v-fec84786></path><path d="M10 11v6" data-v-fec84786></path><path d="M14 11v6" data-v-fec84786></path><path d="M9 6V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2" data-v-fec84786></path></svg> Hapus ',2)]),8,ft)])]))),128)):(p(),u("tr",vt,t[37]||(t[37]=[e("td",{colspan:"14",class:"px-4 py-8 text-center text-gray-500"},[e("div",{class:"flex flex-col items-center"},[e("svg",{class:"w-12 h-12 mb-2 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),e("p",{class:"text-lg font-medium"},"Tidak ada data resep"),e("p",{class:"text-sm"},"Silakan lakukan pencarian untuk menampilkan data")])],-1)])))])])]),J(z,{name:"toast"},{default:$(()=>[K.value?(p(),u("div",yt,[e("div",ht,[e("div",{class:"flex items-center justify-between px-5 py-4 border-b"},[t[40]||(t[40]=e("h3",{class:"text-lg font-semibold"},"Hapus Resep",-1)),e("button",{onClick:V,class:"text-gray-500 hover:text-gray-700"},t[39]||(t[39]=[e("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))]),e("div",kt,[t[46]||(t[46]=e("p",{class:"text-sm text-gray-600"},[m(" Pastikan "),e("b",null,"No Resep"),m(", "),e("b",null,"No SEP Apotek/SJP"),m(", dan "),e("b",null,"Ref Asal SJP"),m(" sesuai. Centang opsi di bawah untuk menghapus "),e("b",null,"semua obat"),m(" lebih dulu (disarankan). ")],-1)),e("div",wt,[e("div",Tt,[t[41]||(t[41]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"No Resep",-1)),T(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>n.noresep=s),type:"text",class:"w-full px-3 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-rose-500 focus:border-transparent",placeholder:"Contoh: 0SI44"},null,512),[[C,n.noresep]])]),e("div",_t,[t[42]||(t[42]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"No SEP Apotek/SJP",-1)),T(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>n.nosjp=s),type:"text",class:"w-full px-3 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-rose-500 focus:border-transparent",placeholder:"Contoh: 1801A00104190000001"},null,512),[[C,n.nosjp]])]),e("div",St,[t[43]||(t[43]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"Ref Asal SJP",-1)),T(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>n.refasalsjp=s),type:"text",class:"w-full px-3 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-rose-500 focus:border-transparent",placeholder:"Contoh: 1801R0010419V000001"},null,512),[[C,n.refasalsjp]])])]),e("div",Lt,[T(e("input",{id:"purgeFirst",type:"checkbox","onUpdate:modelValue":t[13]||(t[13]=s=>O.value=s),class:"w-4 h-4 rounded border-gray-300 text-rose-600 focus:ring-rose-500"},null,512),[[he,O.value]]),t[44]||(t[44]=e("label",{for:"purgeFirst",class:"text-sm text-gray-700"},[m(" Hapus "),e("b",null,"semua obat"),m(" pada resep ini sebelum hapus resep ")],-1))]),e("div",Mt,[e("div",At,[e("h4",Pt," Daftar Obat ("+r(R.value?"memuat...":h.value.length+" item")+") ",1),e("button",{class:"text-xs px-2 py-1 rounded border border-gray-300 hover:bg-gray-50",onClick:t[14]||(t[14]=s=>D(n.nosjp)),disabled:R.value}," Muat Ulang ",8,Nt)]),R.value?(p(),u("div",jt,"Mengambil data... ")):h.value.length===0?(p(),u("div",Ct,"Tidak ada obat.")):(p(),u("ul",Rt,[(p(!0),u(B,null,ae(h.value,(s,o)=>(p(),u("li",{key:o,class:"text-sm flex items-center justify-between border-b last:border-0 py-1"},[e("div",Et,[e("div",Ot,r(s.namaobat),1),e("div",Dt,[t[45]||(t[45]=m(" Kode: ")),e("span",Jt,r(s.kodeobat),1),m(" · Tipe: "+r(s.tipeobat||"N")+" ",1),s.jumlah?(p(),u(B,{key:0},[m(" · Jml: "+r(s.jumlah),1)],64)):w("",!0)])])]))),128))])),M.value&&O.value?(p(),u("div",Bt,[e("div",Kt,"Menghapus obat: "+r(g.done)+"/"+r(g.total)+" selesai, gagal: "+r(g.failed),1),e("div",Vt,[e("div",{class:"h-2 bg-rose-600",style:ke({width:(g.total?g.done/g.total*100:0)+"%"})},null,4)]),g.failed>0?(p(),u("div",Ut," Beberapa obat gagal dihapus. Resep tidak akan dihapus sampai semua obat terhapus. ")):w("",!0)])):w("",!0)])]),e("div",Yt,[e("button",{onClick:V,class:"px-4 py-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50"}," Batal "),e("button",{disabled:M.value||H.value,onClick:de,class:"inline-flex items-center gap-2 px-5 py-2 rounded-lg text-white bg-rose-600 hover:bg-rose-700 disabled:bg-rose-400"},[M.value?(p(),u("svg",zt,t[47]||(t[47]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):w("",!0),m(" "+r(M.value?"Memproses...":"Hapus Resep"),1)],8,$t)])])])):w("",!0)]),_:1})])])])],64))}},qt=Te(Ft,[["__scopeId","data-v-fec84786"]]);export{qt as default};
