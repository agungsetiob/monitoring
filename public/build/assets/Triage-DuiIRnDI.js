import{D as k,g as d,i as B,c as o,o as s,d as c,a as e,b as F,u as N,k as O,y as V,F as p,e as L,A as m,t as u}from"./app-Dsvk9uMI.js";import{d as C}from"./duration-DaRtGe9t.js";import{_ as E}from"./DateFilter-DLh730Re.js";import K from"./TriageChart-D-rK7_eF.js";import M from"./TrendChart-1r_QKXCU.js";import"./auto-0DX8mfB2.js";import"./chart-BOVB5OMx.js";const H={class:"min-h-screen bg-gradient-to-br from-blue-100 to-green-100 flex flex-col items-center justify-center px-8 py-10"},R={class:"w-full bg-white rounded-2xl shadow-xl p-8 space-y-8 max-w-full xl:max-w-8xl"},z={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},G={class:"bg-white p-6 md:p-8 rounded-xl shadow-md border border-gray-200"},q={class:"bg-white p-6 md:p-8 rounded-xl shadow-md border border-gray-200"},I={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},J={class:"bg-white p-6 md:p-8 rounded-xl shadow-md border border-gray-200"},Q={class:"w-full table-auto border-collapse border border-gray-300 rounded-lg overflow-hidden"},U={class:"px-4 py-3 text-gray-700"},W={class:"px-4 py-3 text-gray-700"},X={class:"bg-white p-6 md:p-8 rounded-xl shadow-md border border-gray-200"},Y={class:"w-full table-auto border-collapse border border-gray-300 rounded-lg overflow-hidden"},Z={class:"px-4 py-3 text-gray-700"},tt={class:"px-4 py-3 text-gray-700"},et={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-white bg-opacity-80"},it={__name:"Triage",props:{start_date:String,end_date:String},setup(T){k.extend(C);const i=T,l=d(!1),g=d([]),b=d([]),x=d({}),f=d([]),$=async(r,t)=>{var n,v,_,h,w,P;const{data:a}=await m.get(route("laporan.triage.summary"),{params:{start_date:r,end_date:t}});g.value=[{label:"P1",count:((n=a.report)==null?void 0:n.P1)??0,color:"#f87171"},{label:"P2",count:((v=a.report)==null?void 0:v.P2)??0,color:"#f87171"},{label:"P3",count:((_=a.report)==null?void 0:_.P3)??0,color:"#facc15"},{label:"P4",count:((h=a.report)==null?void 0:h.P4)??0,color:"#4ade80"},{label:"P5",count:((w=a.report)==null?void 0:w.P5)??0,color:"#4ade80"},{label:"DOA",count:((P=a.report)==null?void 0:P.DOA)??0,color:"#9ca3af"}],x.value=a.percentages},j=async(r,t)=>{const{data:a}=await m.get(route("laporan.triage.daily-trend"),{params:{start_date:r,end_date:t}});b.value=a.daily_trend},D=async(r,t)=>{const{data:a}=await m.get(route("laporan.triage.average-los"),{params:{start_date:r,end_date:t}});f.value=a.avg_los},y=async(r,t)=>{l.value=!0;try{await Promise.all([$(r,t),j(r,t),D(r,t)])}finally{l.value=!1}},S=({start_date:r,end_date:t})=>{y(r,t)},A=r=>{const t=k.duration(r,"minutes");return`${t.hours()} jam ${t.minutes()} menit`};return B(()=>{y(i.start_date,i.end_date)}),document.addEventListener("inertia:start",()=>{l.value=!0}),document.addEventListener("inertia:finish",()=>{l.value=!1}),(r,t)=>(s(),o(p,null,[c(N(O),{title:"Laporan Triage"}),e("div",H,[e("div",R,[e("div",z,[t[2]||(t[2]=e("h1",{class:"text-3xl font-extrabold text-gray-800 flex items-center gap-3"},"ðŸ“Š Laporan Triage Pasien",-1)),e("button",{onClick:t[0]||(t[0]=a=>r.$inertia.visit("/laporan")),class:"inline-flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold px-6 py-3 rounded-xl transition duration-300 ease-in-out transform hover:scale-105"},t[1]||(t[1]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M19 12H5"}),e("path",{d:"M12 19l-7-7 7-7"})],-1),V(" Kembali ")]))]),c(E,{"initial-start-date":i.start_date,"initial-end-date":i.end_date,onFilter:S},null,8,["initial-start-date","initial-end-date"]),e("div",G,[t[3]||(t[3]=e("h2",{class:"text-xl font-bold mb-4 text-gray-700"},"ðŸ“Š Grafik Triage",-1)),c(K,{data:g.value},null,8,["data"])]),e("div",q,[t[4]||(t[4]=e("h2",{class:"text-xl font-bold mb-4 text-gray-700"},"ðŸ“ˆ Tren Harian",-1)),c(M,{data:b.value,colors:g.value.map(a=>a.color)},null,8,["data","colors"])]),e("div",I,[e("div",J,[t[6]||(t[6]=e("h2",{class:"text-xl font-bold mb-4 text-gray-700"},"ðŸ“Š Persentase Triage",-1)),e("table",Q,[t[5]||(t[5]=e("thead",{class:"bg-gray-100"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left font-semibold text-gray-800"},"Kategori"),e("th",{class:"px-4 py-3 text-left font-semibold text-gray-800"},"Persentase (%)")])],-1)),e("tbody",null,[(s(!0),o(p,null,L(x.value,(a,n)=>(s(),o("tr",{key:n,class:"border-b border-gray-200 last:border-b-0"},[e("td",U,u(n),1),e("td",W,u(a)+"%",1)]))),128))])])]),e("div",X,[t[8]||(t[8]=e("h2",{class:"text-xl font-bold mb-4 text-gray-700"},"ðŸ¥ Rata-rata LOS",-1)),e("table",Y,[t[7]||(t[7]=e("thead",{class:"bg-gray-100"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left font-semibold text-gray-800"},"Kategori"),e("th",{class:"px-4 py-3 text-left font-semibold text-gray-800"},"LOS Rata-rata")])],-1)),e("tbody",null,[(s(!0),o(p,null,L(f.value,a=>(s(),o("tr",{key:a.kategori,class:"border-b border-gray-200 last:border-b-0"},[e("td",Z,u(a.kategori),1),e("td",tt,u(A(a.avg_los_minutes)),1)]))),128))])])])])])]),l.value?(s(),o("div",et,t[9]||(t[9]=[e("video",{src:"/img/loading.webm",autoplay:"",loop:"",muted:"",playsinline:""},null,-1)]))):F("",!0)],64))}};export{it as default};
