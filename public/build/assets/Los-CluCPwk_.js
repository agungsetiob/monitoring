import{D as v,g as n,i as H,r as R,c as i,o as d,d as p,a as t,b as B,u as x,k as P,W as C,y as f,t as s,F as h,e as N,n as A}from"./app-tb_APLXm.js";import{d as F}from"./duration-F_qsRoUS.js";import{C as I,r as K}from"./chart-BOVB5OMx.js";import{_ as T}from"./DateFilter-GVci9JZs.js";import U from"./LosChart-BrIRF9qt.js";const V={class:"min-h-screen bg-gradient-to-br from-blue-100 to-green-100 px-8 py-10 flex flex-col items-center"},G={class:"w-full max-w-8xl bg-white rounded-2xl shadow-xl p-8 space-y-8"},z={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},W={class:"bg-blue-50 p-6 rounded-xl shadow-inner relative"},q={class:"text-lg text-gray-800"},J={class:"list-disc pl-5 mt-2 text-gray-700"},Q={class:"overflow-x-auto relative"},X={class:"min-w-full border border-gray-300 rounded-lg overflow-hidden"},Z={class:"px-4 py-2"},tt={class:"px-4 py-2"},et={class:"px-4 py-2"},at={class:"px-4 py-2"},st={class:"px-4 py-2"},ot={class:"px-4 py-2 font-semibold"},lt={class:"flex justify-between items-center mt-6"},nt={class:"flex items-center gap-4"},rt=["disabled"],it={class:"text-gray-700 font-medium"},dt=["disabled"],ut={class:"text-sm text-gray-700"},ct={class:"text-red-600"},gt={key:0,class:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-white bg-opacity-80"},bt={__name:"Los",props:{start_date:String,end_date:String},setup($){v.extend(F),I.register(...K);const r=$,D=n(r.start_date),j=n(r.end_date),w=n(0),b=n({}),L=n([]),o=n(1),m=n(1),u=n(20),y=n(0),c=n(!1),_=n({chart:!1}),k=async()=>{c.value=!0,_.value.chart=!0;try{const e=await(await fetch(`/laporan-los/data?start_date=${D.value}&end_date=${j.value}&page=${o.value}&per_page=${u.value}`)).json();e.success&&(L.value=e.patients,w.value=e.average_los,b.value=e.categories,o.value=e.pagination.page,u.value=e.pagination.per_page,m.value=e.pagination.last_page,y.value=e.pagination.total)}catch(a){console.error("Gagal load data:",a)}finally{c.value=!1,_.value.chart=!1}},M=a=>{a<1||a>m.value||(o.value=a,k())};H(k);const O=a=>{const e=v.duration(a,"minutes");return`${e.hours()} jam ${e.minutes()} menit`},Y=a=>{C.get(route("laporan.los"),a)};document.addEventListener("inertia:start",()=>{c.value=!0}),document.addEventListener("inertia:finish",()=>{c.value=!1});function E(a){return a<60?"bg-blue-100 text-blue-600":a<180?"bg-emerald-100 text-emerald-600":a<360?"bg-yellow-100 text-yellow-600":a<480?"bg-red-100 text-red-600":"bg-gray-200 text-gray-700"}return(a,e)=>{const S=R("font-awesome-icon");return d(),i(h,null,[p(x(P),{title:"Laporan LOS IGD"}),t("div",V,[t("div",G,[t("div",z,[e[4]||(e[4]=t("h1",{class:"text-3xl font-extrabold text-gray-800 flex items-center gap-3"}," 🏥 Laporan LOS IGD ",-1)),t("button",{onClick:e[0]||(e[0]=l=>x(C).visit("/laporan")),class:"inline-flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold px-6 py-3 rounded-xl transition duration-300 ease-in-out transform hover:scale-105"},e[3]||(e[3]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M19 12H5"}),t("path",{d:"M12 19l-7-7 7-7"})],-1),f(" Kembali ")]))]),p(T,{"initial-start-date":r.start_date,"initial-end-date":r.end_date,onFilter:Y},null,8,["initial-start-date","initial-end-date"]),p(U,{categories:b.value,"start-date":r.start_date,"end-date":r.end_date,"loading-state":_.value.chart},null,8,["categories","start-date","end-date","loading-state"]),t("div",W,[e[6]||(e[6]=t("h2",{class:"text-xl font-bold text-blue-700 mb-4"},"📊 Rangkuman",-1)),t("p",q,[e[5]||(e[5]=t("strong",null,"Rata-rata LOS:",-1)),f(" "+s(w.value)+" jam",1)]),t("ul",J,[(d(!0),i(h,null,N(b.value,(l,g)=>(d(),i("li",{key:g},s(g)+": "+s(l)+" pasien",1))),128))])]),t("div",Q,[t("table",X,[e[7]||(e[7]=t("thead",{class:"bg-blue-600 text-white"},[t("tr",null,[t("th",{class:"px-4 py-2 text-left"},"No"),t("th",{class:"px-4 py-2 text-left"},"NORM"),t("th",{class:"px-4 py-2 text-left"},"Nama"),t("th",{class:"px-4 py-2 text-left"},"Masuk"),t("th",{class:"px-4 py-2 text-left"},"Keluar"),t("th",{class:"px-4 py-2 text-left"},"LOS")])],-1)),t("tbody",null,[(d(!0),i(h,null,N(L.value,(l,g)=>(d(),i("tr",{key:g,class:A(["border-t",E(l.LOS_MINUTES)])},[t("td",Z,s((o.value-1)*u.value+g+1),1),t("td",tt,s(l.NORM),1),t("td",et,s(l.NAMA),1),t("td",at,s(x(v)(l.MASUK).format("DD/MM/YYYY HH:mm")),1),t("td",st,s(x(v)(l.KELUAR).format("DD/MM/YYYY HH:mm")),1),t("td",ot,s(O(l.LOS_MINUTES)),1)],2))),128))])])]),t("div",lt,[t("div",nt,[t("button",{onClick:e[1]||(e[1]=l=>M(o.value-1)),disabled:o.value===1,class:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 hover:bg-gray-100 rounded-lg disabled:opacity-40 disabled:cursor-not-allowed transition"},[p(S,{icon:"chevron-left"}),e[8]||(e[8]=t("span",null,"Sebelumnya",-1))],8,rt),t("span",it,"Halaman "+s(o.value)+" dari "+s(m.value),1),t("button",{onClick:e[2]||(e[2]=l=>M(o.value+1)),disabled:o.value===m.value,class:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 hover:bg-gray-100 rounded-lg disabled:opacity-40 disabled:cursor-not-allowed transition"},[e[9]||(e[9]=t("span",null,"Berikutnya",-1)),p(S,{icon:"chevron-right"})],8,dt)]),t("div",ut,[f(" Menampilkan pasien "+s((o.value-1)*u.value+1)+" - "+s(Math.min(o.value*u.value,y.value))+" dari total ",1),t("strong",ct,s(y.value),1),e[10]||(e[10]=f(" pasien "))])])])]),c.value?(d(),i("div",gt,e[11]||(e[11]=[t("video",{src:"/img/loading.webm",autoplay:"",loop:"",muted:"",playsinline:""},null,-1)]))):B("",!0)],64)}}};export{bt as default};
