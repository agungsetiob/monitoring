import{D,g as b,i as N,w as V,c as s,o as n,d as j,a as t,b as F,u as A,k as I,p as M,W as L,y as R,F as m,e as O,t as i}from"./app-DJJm6T4R.js";import{C as x,r as $,d as K,_ as H}from"./DateFilter-DixQ4yCN.js";x.register(...$);const W={class:"min-h-screen bg-gradient-to-br from-blue-100 to-green-100 flex flex-col items-center justify-center px-8 py-10"},z={class:"w-full bg-white rounded-2xl shadow-xl p-8 space-y-8 max-w-full xl:max-w-8xl"},G={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},J={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},q={class:"bg-white p-6 md:p-8 rounded-xl shadow-md border border-gray-200"},Q={class:"w-full table-auto border-collapse border border-gray-300 rounded-lg overflow-hidden"},U={class:"px-4 py-3 text-gray-700"},X={class:"px-4 py-3 text-gray-700"},Y={class:"bg-white p-6 md:p-8 rounded-xl shadow-md border border-gray-200"},Z={class:"w-full table-auto border-collapse border border-gray-300 rounded-lg overflow-hidden"},ee={class:"px-4 py-3 text-gray-700"},te={class:"px-4 py-3 text-gray-700"},ae={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-white bg-opacity-80"},le={__name:"Triage",props:{report:Object,daily_trend:Array,percentages:Object,avg_los:Array,start_date:String,end_date:String},setup(B){var v,h,w,P,_,C;D.extend(K);const a=B,c=b(!1);document.addEventListener("inertia:start",()=>{c.value=!0}),document.addEventListener("inertia:finish",()=>{c.value=!1});const d=b([{label:"P1",count:((v=a.report)==null?void 0:v.P1)??0,color:"#f87171"},{label:"P2",count:((h=a.report)==null?void 0:h.P2)??0,color:"#f87171"},{label:"P3",count:((w=a.report)==null?void 0:w.P3)??0,color:"#facc15"},{label:"P4",count:((P=a.report)==null?void 0:P.P4)??0,color:"#4ade80"},{label:"P5",count:((_=a.report)==null?void 0:_.P5)??0,color:"#4ade80"},{label:"DOA",count:((C=a.report)==null?void 0:C.DOA)??0,color:"#9ca3af"}]),u=b(a.daily_trend);let p=null,g=null;const S=r=>{L.get(route("laporan.triage"),r)},y=()=>{const r=document.getElementById("triageChart");r&&(p&&p.destroy(),p=new x(r,{type:"bar",data:{labels:d.value.map(e=>e.label),datasets:[{label:"Jumlah Pasien",data:d.value.map(e=>e.count),backgroundColor:d.value.map(e=>e.color)}]},options:{responsive:!0,maintainAspectRatio:!1}}))},f=()=>{const r=document.getElementById("dailyTrendChart");r&&(g&&g.destroy(),g=new x(r,{type:"line",data:{labels:u.value.map(e=>e.tanggal),datasets:["P1","P2","P3","P4","P5","DOA"].map((e,o)=>({label:e,data:u.value.map(l=>l[e]),borderColor:d.value[o].color,fill:!1,tension:.1}))},options:{responsive:!0,maintainAspectRatio:!1}}))};N(()=>{y(),f()}),V([()=>a.report,()=>a.daily_trend],()=>{var r,e,o,l,k,T;d.value=[{label:"P1",count:((r=a.report)==null?void 0:r.P1)??0,color:"#f87171"},{label:"P2",count:((e=a.report)==null?void 0:e.P2)??0,color:"#f87171"},{label:"P3",count:((o=a.report)==null?void 0:o.P3)??0,color:"#facc15"},{label:"P4",count:((l=a.report)==null?void 0:l.P4)??0,color:"#4ade80"},{label:"P5",count:((k=a.report)==null?void 0:k.P5)??0,color:"#4ade80"},{label:"DOA",count:((T=a.report)==null?void 0:T.DOA)??0,color:"#9ca3af"}],u.value=a.daily_trend,y(),f()},{deep:!0});const E=r=>{const e=D.duration(r,"minutes"),o=e.hours(),l=e.minutes();return`${o} jam ${l} menit`};return(r,e)=>(n(),s(m,null,[j(A(I),{title:"Laporan Triage"}),t("div",W,[t("div",z,[t("div",G,[e[2]||(e[2]=t("h1",{class:"text-3xl font-extrabold text-gray-800 flex items-center gap-3"}," 📊 Laporan Triage Pasien ",-1)),t("button",{onClick:e[0]||(e[0]=o=>A(L).visit("/laporan")),class:"inline-flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold px-6 py-3 rounded-xl transition duration-300 ease-in-out transform hover:scale-105"},e[1]||(e[1]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M19 12H5"}),t("path",{d:"M12 19l-7-7 7-7"})],-1),R(" Kembali ")]))]),j(H,{"initial-start-date":a.start_date,"initial-end-date":a.end_date,onFilter:S},null,8,["initial-start-date","initial-end-date"]),e[7]||(e[7]=M('<div class="bg-white p-6 md:p-8 rounded-xl shadow-md border border-gray-200"><h2 class="text-xl font-bold mb-4 text-gray-700">📊 Grafik Triage</h2><div class="relative h-[400px]"><canvas id="triageChart"></canvas></div></div><div class="bg-white p-6 md:p-8 rounded-xl shadow-md border border-gray-200"><h2 class="text-xl font-bold mb-4 text-gray-700">📈 Tren Harian</h2><div class="relative h-[400px]"><canvas id="dailyTrendChart"></canvas></div></div>',2)),t("div",J,[t("div",q,[e[4]||(e[4]=t("h2",{class:"text-xl font-bold mb-4 text-gray-700"},"📊 Persentase Triage",-1)),t("table",Q,[e[3]||(e[3]=t("thead",{class:"bg-gray-100"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left font-semibold text-gray-800"},"Kategori"),t("th",{class:"px-4 py-3 text-left font-semibold text-gray-800"},"Persentase (%)")])],-1)),t("tbody",null,[(n(!0),s(m,null,O(a.percentages,(o,l)=>(n(),s("tr",{key:l,class:"border-b border-gray-200 last:border-b-0"},[t("td",U,i(l),1),t("td",X,i(o)+"%",1)]))),128))])])]),t("div",Y,[e[6]||(e[6]=t("h2",{class:"text-xl font-bold mb-4 text-gray-700"},"🏥 Rata-rata LOS (Menit)",-1)),t("table",Z,[e[5]||(e[5]=t("thead",{class:"bg-gray-100"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left font-semibold text-gray-800"},"Kategori"),t("th",{class:"px-4 py-3 text-left font-semibold text-gray-800"},"LOS Rata-rata")])],-1)),t("tbody",null,[(n(!0),s(m,null,O(a.avg_los,o=>(n(),s("tr",{key:o.kategori,class:"border-b border-gray-200 last:border-b-0"},[t("td",ee,i(o.kategori),1),t("td",te,i(E(o.avg_los_minutes)),1)]))),128))])])])])])]),c.value?(n(),s("div",ae,e[8]||(e[8]=[t("video",{src:"/img/loading.webm",autoplay:"",loop:"",muted:"",playsinline:""},null,-1)]))):F("",!0)],64))}};export{le as default};
